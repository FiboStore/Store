!function(){var e=function(e){var t={exports:{}};return e.call(t.exports,t,t.exports),t.exports},t=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(e){return e&&e.__esModule?e:{"default":e}},a=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t},r=function e(t,i,n){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,i);if(a===undefined){var o=Object.getPrototypeOf(t);return null===o?undefined:e(o,i,n)}if("value"in a)return a.value;var s=a.get;return s===undefined?undefined:s.call(n)},l=function(){function e(e,t){var i=[],n=!0,a=!1,o=undefined;try{for(var s,r=e[Symbol.iterator]();!(n=(s=r.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){a=!0,o=e}finally{try{!n&&r["return"]&&r["return"]()}finally{if(a)throw o}}return i}return function(t,i){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=Shopify.Components,h=Shopify.Loading,d=Shopify.Keycodes,c=Shopify.hotshot,f=Shopify.Browser,p=Shopify.Time,m=Shopify.Money,v=Shopify.Number,y=Shopify.AnalyticsAPI,g=Shopify.routes,O=Shopify.Inflection,T=Shopify.range,E=window.Page;(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Shopify.Remote=function(){function t(t,i,n,a){this.ajaxOptions=null!=t?t:{},this.refreshOnSuccess=i,this.refreshOnError=n,this.fullRefresh=null!=a&&a,this.submit=e(this.submit,this)}return t.prototype.submit=function(){var e;Shopify.Loading.start(),e=$.ajax(this.ajaxOptions),e.always(function(){return Shopify.Loading.stop()}),e.done(function(e){return function(t,i,n){var a,o,s;return(a=n.getResponseHeader("X-Next-Redirect"))?void Page.visit(a,{reload:!0}):(null!=(o=e.ajaxOptions.done)&&o.apply(null,arguments),s=e.refreshOnSuccess?e.refreshOnSuccess.split(" "):[],e.fullRefresh?Page.refresh({onlyKeys:s}):"false"!==e.refreshOnSuccess?Page.refresh({response:n,onlyKeys:s}):void 0)}}(this)),e.fail(function(e){return function(t,i,n){var a;if(null!=(a=e.ajaxOptions.fail)&&a.apply(null,arguments),"false"!==e.refreshOnError)return e.refreshOnError?Page.refresh({response:t,onlyKeys:e.refreshOnError.split(" ")}):Shopify.handleError(t,i,n)}}(this))},t}()}).call(this),function(){Shopify.DashboardActivity=function(){function e(e){this.activityFilter=e||"all"}return e.prototype.activityLoading=!1,e.prototype.loadMoreActivity=function(e){return this.activityLoading=!0,this.xhr&&this.xhr.abort(),this.xhr=$.ajax({dataType:"html",data:{activity_pages:e,activity_filter:this.activityFilter},url:"/admin/dashboard/activity_feed",success:function(e){return function(){return Page.refresh({onlyKeys:["dashboardActivity"],response:e.xhr})}}(this),done:function(){return this.activityLoading=!1}}),this.xhr.fail(Shopify.handleError)},e}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Shopify.SummaryReport=function(){function t(t,i){var n;null==i&&(i={}),this.changeChannelProvider=e(this.changeChannelProvider,this),this.changeDateRange=e(this.changeDateRange,this),this.$node=$(t),this.queryProps||(this.queryProps={startDate:"-30d",endDate:"-1d",channelFilter:""}),n=Object.assign({},i.actionConfig),n[Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT]=this.changeChannelProvider,Shopify.rootDispatcher.register(n).bindToNode(t),this.initializeView(),this._load()}return t.prototype.FINANCES_PATH="finances/show",t.prototype.queries=function(){throw new Error("Subclasses must define at least one shopifyQL query.")},t.prototype.initializeView=function(){},t.prototype.createTemplate=function(e){var t;return t=this.$node.find(e).remove(),_.template(t.html())},t.prototype.append=function(e,t){return this.$node.empty(),this.$node.append(e(t))},t.prototype.extractKey=function(e){var t,i;return t=e.query.columns[0].field,i=Shopify.Inflection.classify(t),i.charAt(0).toLowerCase()+i.substring(1)},t.prototype.changeDateRange=function(e){var t,i,n;return i=e.data,n=i.startDate,t=i.endDate,this.queryProps.startDate=n,this.queryProps.endDate=t,this._load()},t.prototype.changeChannelProvider=function(e){var t,i,n;return n=e.data.split("-"),t=n[0],i=n[1],"all"===t?this.queryProps.channelFilter="":(this.queryProps.channelFilter="WHERE channel_provider_id == "+t,i&&(this.queryProps.channelFilter+=" AND location_id == '"+i+"'")),this._load()},t.prototype._load=function(){var e,t;return this.renderLoading&&this.renderLoading(),e=this.queries(),Promise.all(function(){var i;i=[];for(t in e)i.push(Shopify.AnalyticsAPI.query(e[t]));return i}()).then(this.renderResult.bind(this))["catch"](this.renderError.bind(this))},t.prototype.renderResult=function(){throw new Error("Subclasses must handle successful query results.")},t.prototype.renderError=function(){throw new Error("Subclasses must handle failed query results.")},t}()}.call(this),function(){var e,t,i,n=function(e,t){return function(){return e.apply(t,arguments)}};t="reports:channelpicker:channel-changed",e="reports:channelpicker:after-channel-changed",i="SHOW orders\nFROM sales\nWHERE financial_status != 'refunded'\nSINCE -90d\nUNTIL 0d",Shopify.SummaryReportChannelpicker=function(){function a(e,t){this._onChannelChanged=n(this._onChannelChanged,this),this.channelLabels={},this.$node=$(e),t.forEach(function(e){return function(t){var i,n;return i=t.id.split("-")[1],i?(n=t.name.indexOf("\u2014"),e.channelLabels[t.id]=t.name.substring(n+1)):e.channelLabels[t.id]=t.name}}(this)),Shopify.rootDispatcher.register(Shopify.SummaryReportChannelpicker.CHANNEL_CHANGED_EVENT,this._onChannelChanged).bindToNode(e),this._checkForOtherOrders()}return a.CHANNEL_CHANGED_EVENT=t,a.AFTER_CHANNEL_CHANGED_EVENT=e,a.prototype.setChannel=function(e){return this.currentChannelId=e,Shopify.rootDispatcher.dispatch({type:t,data:this.currentChannelId}),Shopify.UIPopover.deactivate()},a.prototype._onChannelChanged=function(t){return this.currentChannelId=t.data,this.currentChannelLabel=this.channelLabels[this.currentChannelId],Shopify.rootDispatcher.dispatch({type:e,data:this.currentChannelId})},a.prototype._checkForOtherOrders=function(){return Shopify.AnalyticsAPI.query(i).then(function(e){return function(t){if(t.result.data[0][0]>0)return e.$node.find(".js-other-channel").removeClass("hide")}}(this))},a}()}.call(this);var k=(e(function(e,n){"use strict";function a(e,t){$.ajax({url:e,type:"POST",data:t||{}})}Object.defineProperty(n,"__esModule",{value:!0});var o="https://youtube.com/embed",s=function(){function e(t,n){i(this,e),this.$node=$(t),this.options=n,this.videoVisible=!1}return t(e,[{key:"removeVideo",value:function(){this.$node.html(""),this.videoVisible=!1}},{key:"render",value:function(){this.$node.html(""),this.videoVisible=!0,$("<iframe>",{src:o+"/"+this.options.videoId+(this.options.videoParams||""),frameborder:0,allowfullscreen:""}).appendTo(this.$node),a(this.options.trackingUrl,this.options.trackingData)}}]),e}();n["default"]=s,Shopify.YoutubePlayer=null!=n["default"]?n["default"]:n}),e(function(e,n){"use strict";function a(e){var t=document.createElement("iframe");return t.id=e,t.src=o(e),t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen",!0),t}function o(e){return r+"/"+e+"?"+l.join("&")+"&autoplay=true&player_id="+e}function s(e,t){$.ajax({url:e,type:"POST",data:t||{}})}Object.defineProperty(n,"__esModule",{value:!0});var r="https://player.vimeo.com/video",l=["title=0","byline=0","portrait=0","api=1"],u=function(){function e(t,n){i(this,e),this.node=t,this.options=n,this.videoVisible=!1}return t(e,[{key:"removeVideo",value:function(){this.videoVisible=!1,this.iframe.remove()}},{key:"render",value:function(){this.iframe=a(this.options.videoId),this.node.appendChild(this.iframe),this.videoVisible=!0,s(this.options.trackingUrl,this.options.trackingData)}}]),e}();n["default"]=u,Shopify.VimeoPlayer=null!=n["default"]?n["default"]:n}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n(_),s=n($),r=2,l=250,u=function(){function e(t){i(this,e),this.cleanup=this.cleanup.bind(this),this._consumedCards=this._consumedCards.bind(this),this._recordConsumedCards=this._recordConsumedCards.bind(this),this._resetTimer=this._resetTimer.bind(this),this.throttledFunction=o["default"].throttle(this._resetTimer,l),this.recentlyConsumedCards=new Set,this.requestId=t.requestId,this.$window=(0,s["default"])(window),Page.onReplace((0,s["default"])(".page")[0],this.cleanup)}return t(e,[{key:"watch",value:function(){this.$window.on("scroll",this.throttledFunction),this._startTimer()}},{key:"cleanup",value:function(){this._clearTimer(),this.$window.off("scroll",this.throttledFunction)}},{key:"_consumedCards",value:function(){var e=this,t=[];return(0,s["default"])(".ui-feed__item--card").each(function(i,n){var a=(0,s["default"])(n),o=a.data("handle"),r=a.data("analytics-group"),l=i+1;e._isOnScreen(a)&&!e.recentlyConsumedCards.has(o)&&t.push({handle:o,analytics_group:r,position:l})}),t}},{key:"_recordConsumedCards",value:function(){var e=this,t=this._consumedCards();t.forEach(function(t){return e.recentlyConsumedCards.add(t.handle)}),t.length>0&&this._submitConsumedCards(t)}},{key:"_isOnScreen",value:function(e){var t=(0,s["default"])(".header").height()+(0,s["default"])("#turbo").height(),i=this.$window.scrollTop(),n={top:i+t,bottom:i+this.$window.height()},a=e.offset();return a.bottom=a.top+e.outerHeight(),a.top>=n.top&&a.bottom<=n.bottom}},{key:"_startTimer",value:function(){this.timeout=window.setTimeout(this._recordConsumedCards,1e3*r)}},{key:"_clearTimer",value:function(){this.timeout&&window.clearTimeout(this.timeout),this.timeout=null}},{key:"_resetTimer",value:function(){this._clearTimer(),this._startTimer()}},{key:"_submitConsumedCards",value:function(e){s["default"].ajax({url:"/admin/home/consume_cards",data:JSON.stringify({cards:e,original_request_id:this.requestId}),type:"POST",contentType:"application/json"})}}]),e}();a["default"]=u,Shopify.CardConsumption=null!=a["default"]?a["default"]:a}),e(function(e,t){"use strict";function i(e,t){var i=500,n=400,a=screen.width/2-i/2,o=screen.height/2-n/2,s=["width="+i,"height="+n,"left="+a,"top="+o,"toolbar=no","location=no","directories=no","status=no","menubar=no","scrollbars=yes","copyhistory=no","resizable=yes"];window.open(e,t,s.join(" "))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i,Shopify.CenterPopup=null!=t["default"]?t["default"]:t}),e(function(e,a){"use strict";function o(e,t){l["default"].ajax({url:t,type:"POST",data:e})}Object.defineProperty(a,"__esModule",{value:!0});var s=n(Twine),r=n(_),l=n($),h={VOTE_DIALOG_HEADER:"next-card--home-card-feedback",VOTE_DIALOG_SURVEY:"js-home-vote-dialog-survey",VOTE_DIALOG_UPVOTE_THANKS:"js-home-vote-dialog-upvote-thanks",VOTE_DIALOG_DOWNVOTE_THANKS:"js-home-vote-dialog-downvote-thanks",FEEDBACK_OVERLAY:"home-card-overlay--feedback",FEEDBACK_COMMENT_BOX:"js-feedback-comment",FEEDBACK_OPTION:"feedback-form__item",FEEDBACK_OPTION_WRAPPER:"feedback-form",UNDO_OVERLAY:"js-home-card-undo-overlay",FEEDBACK_MENU:"js-feedback-menu",DROPDOWN_BUTTON:"js-dropdown-button",CARD:"next-card",HIDE:"hide",INVISIBLE:"feedback-overlay--invisible",POPOVER_BUTTON:"btn--popover-activator",UNDO_FEEDBACK:"feedback-overlay",FEEDBACK_BODY:"feedback-overlay__body",FEEDBACK_UNDO:"feedback-overlay__undo",FEED_ITEM:"ui-feed__item",FEEDBACK_FORM:"feedback-form"},d={UPVOTE:1,DOWNVOTE:0},c={ANIMATION:200,HIDE_CARD:2500,HIDE_VOTE_DIALOG:1250},f={FEEDBACK_BASE:0,FEEDBACK_REASON:20,FEEDBACK_REASON_SPACING:10,ICON_ORIGINAL:20,UNDO_OVERLAY:136,UNDO_FEEDBACK_OVERLAY:0,UNDO_FEEDBACK_CONFIRM:0},p=5,m=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};i(this,e),this.onAction=this.onAction.bind(this),this.hideVoteDialog=this.hideVoteDialog.bind(this),this._hideUndoOverlay=this._hideUndoOverlay.bind(this),this._unregisterOnActionListeners=this._unregisterOnActionListeners.bind(this),this.voteDialogValue=null,this.options=n,this.$node=(0,l["default"])(t),this.feedbackHeading="Send feedback",this.$cardNode=this.$node.find("."+h.CARD).first(),this.$voteDialogNode=this.$node.find("."+h.VOTE_DIALOG_HEADER),this.$popoverButtonNode=this.$node.find("."+h.POPOVER_BUTTON),this.$undoWithFeedback=this.$node.find("."+h.UNDO_FEEDBACK),this.$undoWithFeedbackParent=this.$node.closest("."+h.CARD),this.$undoWithFeedbackTopParent=this.$node.closest("."+h.FEED_ITEM),this._registerOnActionListeners(),Page.onReplace(t,this._unregisterOnActionListeners)}return t(e,[{key:"showDismissWithFeedback",value:function(){o(this._getOptionsForSubmission({industry:this.options.current_industry}),this.options.not_my_industry_url),f.UNDO_FEEDBACK_OVERLAY=this.$node.outerHeight(),this._expandDismissWithFeedbackOverlay()}},{key:"hideDismissWithFeedback",value:function(){var e=this;this.$undoWithFeedbackParent.animate({opacity:0,height:0,"min-height":0},{duration:c.ANIMATION,complete:function(){e.$node.closest("."+h.FEED_ITEM).remove(),(0,l["default"])(".next-card.overlaid").length||window.location.reload()}})}},{key:"undoDismissWithFeedback",value:function(){var e=this;o(this._getOptionsForSubmission({industry:this.options.current_industry}),this.options.undo_not_my_industry_url),this.$undoWithFeedbackParent.animate({height:f.UNDO_FEEDBACK_OVERLAY,"min-height":f.UNDO_FEEDBACK_OVERLAY},{duration:c.ANIMATION,complete:function(){return e.$undoWithFeedbackParent.css({overflow:"",height:"","min-height":""})}}),this.$node.addClass(h.INVISIBLE)}},{key:"sendDismissWithFeedback",value:function(){var e=this,t=this.$node.find("."+h.FEEDBACK_FORM).find("input[name!=other]").serializeArray(),i={accepted:[],rejected:[this.options.current_industry],other:""};t.forEach(function(e){"other_feedback"===e.name?i.other=e.value.toLowerCase():i.accepted.push(e.value.toLowerCase())}),"undefined"!=typeof i.accepted&&i.accepted.length>0||(i.accepted=[""]),o(this._getOptionsForSubmission(i),this.options.update_industries_url),this.$node.find("."+h.FEEDBACK_UNDO).remove(),this.$node.find("."+h.FEEDBACK_BODY).replaceWith(""),this._updateUndoWithFeedbackDialog({heading:"Thanks for the update",message:"This will help us provide you with better data in the future about your store performance."}),f.UNDO_FEEDBACK_CONFIRM=this.$node.outerHeight(),this.$undoWithFeedbackParent.animate({height:f.UNDO_FEEDBACK_CONFIRM,"min-height":f.UNDO_FEEDBACK_CONFIRM},{duration:c.ANIMATION,complete:function(){return e.$undoWithFeedbackParent.css({overflow:"hidden"})}})}},{key:"onAction",value:function(e){var t={};r["default"].get(e,"target.dataset.buttonId")&&(t.button_id=r["default"].get(e,"target.dataset.buttonId")),this._trackEvent("register_card_engagement_url",t)}},{key:"dismiss",value:function(){u.Popover.deactivate(),this._storeOriginalHeight(),this._resizeToUndoOverlayHeight(),this.$popoverButtonNode.addClass(""+h.HIDE),this._trackEvent("dismiss_card_url"),this._updateUndoDialog({heading:this.options.dismiss_title,message:this.options.dismiss_message,image:this.options.dismiss_image,action:"dismiss"}),this.$node.find("."+h.UNDO_OVERLAY).removeClass(h.HIDE)}},{key:"upvote",value:function(){this.voteDialogValue=d.UPVOTE,this._trackEvent("upvote_card_url"),this._updateVoteDialogThanks()}},{key:"downvote",value:function(){this.voteDialogValue=d.DOWNVOTE,this._trackEvent("downvote_card_url"),this._updateVoteDialogThanks()}},{key:"showFeedbackDialog",value:function(){u.Popover.deactivate(),this.hideAfterFeedback=!1,this._storeOriginalHeight(),this._expandFeedbackDialog(),this.$popoverButtonNode.addClass(""+h.HIDE)}},{key:"showFeedbackDialogFromDismiss",value:function(){this.hideAfterFeedback=!0,this.$node.find("."+h.UNDO_OVERLAY).addClass(""+h.HIDE),s["default"].refresh(),this._expandFeedbackDialog()}},{key:"showFeedbackDialogFromVote",value:function(){this.hideVoteDialog(),this.hideAfterFeedback=!1,this.voteDialogValue===d.UPVOTE?(this.feedbackHeading="What did you find useful?",this.$node.find("."+h.FEEDBACK_OPTION).addClass(""+h.HIDE),this.$node.find("."+h.FEEDBACK_OPTION_WRAPPER).addClass(""+h.HIDE),this.selectedFeedbackOption="This is useful"):(this.$node.find('input[value="This is useful"]').closest("."+h.FEEDBACK_OPTION).addClass(""+h.HIDE),this.$node.find('input[value="This isn\'t useful"]').prop("checked",!0),this.selectedFeedbackOption="This isn't useful"),this._storeOriginalHeight(),this._expandFeedbackDialog(),this.$node.find("."+h.FEEDBACK_COMMENT_BOX).focus()}},{key:"hideFeedbackDialog",value:function(){this.$node.find("."+h.FEEDBACK_OVERLAY).addClass(h.HIDE),null!==this.voteDialogValue&&(this.$node.find("."+h.FEEDBACK_OPTION).removeClass(""+h.HIDE),this.voteDialogValue===d.UPVOTE&&(this.$node.find("."+h.FEEDBACK_OPTION_WRAPPER).removeClass(""+h.HIDE),this.feedbackHeading="Send feedback"),this.voteDialogValue=null),this.selectedFeedbackOption=null,this.selectedFeedbackComment=null}},{key:"cancelFeedbackDialog",value:function(){if(this.hideAfterFeedback)return void this.hide();this.hideFeedbackDialog(),this._resizeToOriginalHeight(),this.$popoverButtonNode.removeClass(""+h.HIDE)}},{key:"hideVoteDialog",value:function(){this.$voteDialogNode.animate({opacity:0,height:0,"min-height":0},{duration:c.ANIMATIONS})}},{key:"undo",value:function(){"dismiss"===this.undoAction&&(this._trackEvent("undo_dismiss_card_url"),this._hideUndoOverlay())}},{key:"submitFeedback",value:function(){var e=null===this.voteDialogValue?this.options.submit_feedback_url:this.options.card_vote_feedback_url;if(o({handle:this.options.handle,analytics_group:this.options.analytics_group,feedback:this.selectedFeedbackOption,comment:this.selectedFeedbackComment},e),this.hideAfterFeedback)return void this.hide();this.hideFeedbackDialog(),this._resizeToUndoOverlayHeight(),this._updateUndoDialog({heading:"Thanks for your feedback",message:"It will be used to improve your home feed.",action:null}),this.$node.find("."+h.UNDO_OVERLAY).removeClass(h.HIDE),setTimeout(this._hideUndoOverlay,c.HIDE_CARD)}},{key:"isFeedbackSelected",value:function(){return this.selectedFeedbackOption||this.selectedFeedbackComment}},{key:"hide",value:function(){var e=this;this.$node.animate({opacity:0,height:0,"min-height":0},{duration:c.ANIMATION,complete:function(){e.$node.remove(),(0,l["default"])(".next-card.overlaid").length||window.location.reload()}})}},{key:"_expandDismissWithFeedbackOverlay",value:function(){var e=this,t=this.$undoWithFeedback.outerHeight();this.$undoWithFeedback.removeClass(h.INVISIBLE),this.$cardNode.closest("."+h.CARD).animate({height:t,"min-height":t},{duration:c.ANIMATION,complete:function(){return e.$cardNode.css({"z-index":p})}})}},{key:"_getOptionsForSubmission",value:function(e){return Object.assign({handle:this.options.handle,analytics_group:this.options.analytics_group},e)}},{key:"_expandFeedbackDialog",value:function(){var e=this;this.$node.find("."+h.FEEDBACK_OVERLAY).removeClass(h.HIDE),this.$node.find('input[type="radio"].feedback-reason').first().focus();var t=this._feedbackHeight();this.$cardNode.animate({height:t,"min-height":t},{duration:c.ANIMATION,complete:function(){return e.$cardNode.css({overflow:"hidden"})}})}},{key:"_hideUndoOverlay",value:function(){this._resizeToOriginalHeight(),this.$popoverButtonNode.removeClass(""+h.HIDE),this.$node.find("."+h.UNDO_OVERLAY).addClass(""+h.HIDE),s["default"].refresh()}},{key:"_updateVoteDialogThanks",value:function(){var e=this.voteDialogValue===d.UPVOTE?h.VOTE_DIALOG_UPVOTE_THANKS:h.VOTE_DIALOG_DOWNVOTE_THANKS;this.$voteDialogNode.find("."+h.VOTE_DIALOG_SURVEY).addClass(""+h.HIDE),this.$voteDialogNode.find("."+e).removeClass(""+h.HIDE)}},{key:"_updateUndoDialog",value:function(e){this.undoHeading=e.heading,this.undoMessage=e.message,this.undoImage=e.image,this.undoAction=e.action}},{key:"_updateUndoWithFeedbackDialog",value:function(e){this.undoHeading=e.heading,this.undoMessage=e.message,this.undoByline=e.byline,this.undoImage=e.image}},{key:"_trackEvent",value:function(e,t){var i=this.options[e];o(r["default"].merge(r["default"].pick(this.options,["handle","analytics_group"]),t),i)}},{key:"_feedbackHeight",value:function(){return f.FEEDBACK_BASE=this.$node.find("."+h.FEEDBACK_OVERLAY).outerHeight(),f.FEEDBACK_BASE}},{key:"_storeOriginalHeight",value:function(){this.originalHeight=this.$cardNode.height()}},{key:"_resizeToOriginalHeight",value:function(){var e=this;this.$cardNode.animate({height:this.originalHeight,"min-height":this.originalHeight},{duration:c.ANIMATION,complete:function(){return e.$cardNode.css({overflow:"",height:"","min-height":""})}})}},{key:"_resizeToUndoOverlayHeight",value:function(){var e=this;this.$cardNode.animate({height:f.UNDO_OVERLAY,"min-height":f.UNDO_OVERLAY},{duration:c.ANIMATION,complete:function(){return e.$cardNode.css({overflow:"hidden"})}})}},{key:"_registerOnActionListeners",value:function(){var e=["a","input[type=submit]","button:not(."+h.FEEDBACK_OVERLAY+" button","."+h.UNDO_OVERLAY+" button","."+h.FEEDBACK_MENU+" button","."+h.DROPDOWN_BUTTON+")"];this.$cardNode.on("click",e.join(", "),this.onAction)}},{key:"_unregisterOnActionListeners",value:function(){this.$cardNode.off("click",this.onAction)}}]),e}();a["default"]=m,Shopify.HomeCard=null!=a["default"]?a["default"]:a})),D=(e(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(k),r=function(e){function t(e,n){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.$node.find('.btn[href="#"]').on("click",function(e){return e.preventDefault(),a.hide()}),a}return a(t,e),t}(s["default"]);t["default"]=r,Shopify.CustomFeedCard=null!=t["default"]?t["default"]:t}),e(function(e,a){"use strict";function o(){var e=(0,D["default"])(window).scrollTop(),t=(0,D["default"])(".page").hasClass("page--sidebar-is-visible");if(window.innerWidth<1066&&t){(0,D["default"])(".home-greeting").css("margin-top","-="+e+"px");var i=(0,D["default"])(".home-greeting").height()-e;(0,D["default"])(".page__content").css("margin-top",i+"px"),(0,D["default"])(window).scrollTop(0)}else{var n=(0,D["default"])(".home-greeting").css("margin-top").replace(/[^-\d.]/g,"");(0,D["default"])(window).scrollTop(-1*n),(0,D["default"])(".home-greeting, .page__content").css("margin-top","")}}function s(){var e=(0,D["default"])(".nav-toggle button"),t=(0,D["default"])(".page-home-index")[0];e.on("click",function(){(0,D["default"])(".page--sidebar-is-visible").length&&window.Shopify.Home.toggleSidebar()}),Page.onReplace(t,function(){return e.off("click")}),Page.onReplace(t,r)}function r(){(0,D["default"])(window).off("resize.calcSidebar")}function l(){(0,D["default"])("."+N+" a[tg-remote='delete']").one("click",d)}function d(e){var t=e.currentTarget,i=(0,D["default"])(t).closest("."+N),n=(0,D["default"])(t).closest("."+C),a=void 0;a=n.children().length<=2?n:i,a.slideUp(150,function(){i.next().is("HR")&&i.next().remove(),i.remove(),0===n.children().length&&n.remove(),S["default"].stop()})}function c(e){(0,D["default"])(e.target).closest(".next-card").css("z-index",I)}function f(e){(0,D["default"])(e.target).closest(".next-card").css("z-index","")}function p(){var e=(0,D["default"])(".ui-feed");e.on(u.Popover.EVENTS.ACTIVATING,".ui-popover",c),e.on(u.Popover.EVENTS.DEACTIVATED,".ui-popover",f),Page.onReplace(e[0],function(){e.off(u.Popover.EVENTS.ACTIVATING),e.off(u.Popover.EVENTS.DEACTIVATED)})}function m(e){var t=/\/admin/g;return e.host===window.location.host&&t.test(e.href)}function v(e){return"javascript:"!==e.protocol&&"mailto:"!==e.protocol&&"tel:"!==e.protocol}function y(){(0,D["default"])(".page-home-index .page__content a").each(function(e,t){var i=!m(t),n=v(t);if(i&&n||k(t)){var a=(0,D["default"])(t);a.attr("target","_blank"),a.addClass("external-link");var o=a.attr("href");a.attr("href",O(o))}})}function g(e){return-1!==e.indexOf("?")}function O(e){var t=e,i="";-1!==t.indexOf("#")&&(i=t.slice(t.indexOf("#")),t=t.slice(0,t.indexOf("#")));var n=g(t);return E(t)||(t=T(t,"utm_source","Shopify",!n),t=T(t,"utm_medium","AdminHomefeed"),t=T(t,"utm_campaign","Homecards")),""+t+i}function T(e,t,i){var n=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return-1!==e.indexOf(t)?e:e+(n?"?":"&")+t+"="+i}function E(e){return g(e)&&-1!==e.indexOf("hmac=")}function k(e){var t=!0,i=!1,n=undefined;try{for(var a,o=A[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(-1!==e.href.indexOf(s))return!0}}catch(e){i=!0,n=e}finally{try{!t&&o["return"]&&o["return"]()}finally{if(i)throw n}}return!1}Object.defineProperty(a,"__esModule",{value:!0});var D=n($),b=n(_),S=n(h),C="next-card__section",N="notification",I=2,A=["/admin/experts/redirect"],P=function(){function e(t){i(this,e),this.cardConsumption=new Shopify.CardConsumption({requestId:t}),l(),s()}return t(e,[{key:"onFeedLoaded",value:function(){y(),p(),this.cardConsumption.watch()}}],[{key:"toggleSidebar",value:function(e){(0,D["default"])(".page").toggleClass("page--sidebar-is-visible"),o(),void 0===e?r():(0,D["default"])(window).on("resize.calcSidebar",b["default"].throttle(o,200))}}]),e}();a["default"]=P,Shopify.Home=null!=a["default"]?a["default"]:a}),e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n($),l=n(k),u="feedback-search__input",h="feedback-search__results",d="feedback-search_item",c="ui-action-list__item",f="hide",p=function(e){function n(e,t){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return a.feedbackList=t.feedback_helper_values,a.currentCategory=t.current_industry,a._updateUndoWithFeedbackDialog({heading:"Thanks for letting us know",message:"You will stop receiving information about the "+a.currentCategory+" industry.",byline:"Here are some other industries that may be a better match. If you have a minute, let us know which ones apply."}),a}return a(n,e),t(n,[{key:"textInputHandler",value:function(e){var t=this,i=this.autoComplete(e.value,this.feedbackList.complete_list),n=document.createDocumentFragment();i.forEach(function(e){var i=document.createElement("li");i.classList.add(d,c),i.setAttribute("role","option"),i.innerHTML='<button class="ui-action-list-action" type="button" name="button">\n                        <span class="ui-action-list-action__text">\n                          '+e+"\n                        </span>\n                      </button>",i.addEventListener("mousedown",t._autoCompleteAction,!1),n.appendChild(i)}),i.length&&this.sanitize?((0,r["default"])("."+h).removeClass(f),(0,r["default"])(e).next("."+h).html(n)):(0,r["default"])("."+h).addClass(f)}},{key:"inputFocusHandler",value:function(e){this.validInputEvent=!(document.activeElement===e&&e.value),this.validInputEvent?(0,r["default"])("."+h).addClass(f):(0,r["default"])("."+h).removeClass(f)}},{key:"checkboxHandler",value:function(e){e.checked?(this._autoCompleteDisabled(!1),(0,r["default"])("."+u).focus()):this._autoCompleteDisabled(!0)}},{key:"autoComplete",value:function(e,t){var i=this;return this._buildInputRegex(e),t.filter(function(e){return!!e.match(i.reg)&&e})}},{key:"_buildInputRegex",value:function(e){this.sanitize=/^[\w\s]+$/.test(e),this.sanitize&&(this.reg=new RegExp(e.split("").join("\\w*\\s*\\w*"),"i"))}},{key:"_autoCompleteDisabled",value:function(e){(0,r["default"])("."+u).attr("disabled",this.autoCompleteDisabled=e),(0,r["default"])("."+u).val("")}},{key:"_autoCompleteAction",value:function(){(0,r["default"])("."+u).val(this.textContent.trim())}}]),n}(l["default"]);s["default"]=p,Shopify.IndustryBenchmarkCardFeedback=null!=s["default"]?s["default"]:s}),e(function(e,a){"use strict";function o(e,t){return e.attr(t,"true"===e.attr(t)?"false":"true")}Object.defineProperty(a,"__esModule",{value:!0});var s=n($),r="notification-dismissal",l="[data-endpoint]",u=3,h=function(){function e(t,n){i(this,e),this.logNotification=this.logNotification.bind(this),this.options=n,this.$node=(0,s["default"])(t),this.$dismiss=(0,s["default"])(t).find("."+r),this._createLogNotificationListeners()}return t(e,[{key:"removeNotificationDismiss",value:function(){this.$node.remove()}},{key:"toggleNotificationDismissOverlay",value:function(){var e=this._calculateDismissHeight();this.$node.css("height",e),o(this.$dismiss,"aria-hidden")}},{key:"logNotification",value:function(e){var t=this.options,i=t.handle,n=t.analytics_group,a=t.data,o=(0,s["default"])(e.target),r=o.data("endpoint");s["default"].ajax({url:r,type:"POST",data:{handle:i,analytics_group:n,data:a}})}},{key:"_calculateDismissHeight",value:function(){return this.$dismiss.outerHeight()+u}},{key:"_createLogNotificationListeners",value:function(){this.$node.find(""+l).on("click",this.logNotification)}}]),e}();a["default"]=h,Shopify.Notification=null!=a["default"]?a["default"]:a})),b=(e(function(e,t){"use strict";function i(e,t){m.isKnownBrowser()&&!m.isMobile()&&(m.isMac()||m.isWindows())&&(a(r(),h.D_LOWER_CASE,t),$(e).append(l()))}function a(e,t,i){return p["default"].bindCombo([e,t],function(){return o(i)})}function o(e){e.hide(),e.onAction()}function r(){return m.isMac()?h.COMMAND:h.CONTROL}function l(){return"Press "+u(m.isMac()?"\u2318":"Ctrl")+" + "+u("D")+" to bookmark your Shopify admin."}function u(e){return'<kbd class="keyboard-key s-none">'+e+"</kbd>"}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var h=s(d),p=n(c),m=s(f);Shopify.BookmarkShortcut=null!=t["default"]?t["default"]:t}),e(function(e,s){"use strict";function r(){(0,l["default"])(d).each(function(e,t){return(0,l["default"])(t).find("input")[0].checked?((0,l["default"])(t).find(c).removeClass("hide"),(0,l["default"])(t).find(f).addClass("hide")):((0,l["default"])(t).find(f).removeClass("hide"),(0,l["default"])(t).find(c).addClass("hide"))})}Object.defineProperty(s,"__esModule",{value:!0}),s.toggleImage=r;var l=n($),h=n(k),d=".platform-feedback__input-container",c=".platform-feedback__image--select-state",f=".platform-feedback__image--null-state",p=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"submitResult",value:function(e){var t=JSON.parse(e);return"error"in t?u.Flash.error(t.error):(u.Flash.notice("Thanks for your feedback!"),this.hide())}}]),n}(h["default"]);s["default"]=p,Shopify.QuestionCard=null!=s["default"]?s["default"]:s}),e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var l=n(Twine),u=n(D),h=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"onAction",value:function(){return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onAction",this).call(this),l["default"].context(document.body).uploadRequestedDocumentsModal.show()}}]),n}(u["default"]);s["default"]=h,Shopify.RequestedDocumentsNotification=null!=s["default"]?s["default"]:s}),e(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(t){i(this,e),this.$dataList=$(t).find(".home-data-list")}return t(e,[{key:"showMore",value:function(){var e=this,t=this._truncatedHeight(),i=this._fullHeight();this.$dataList.css("max-height",t),this.$dataList.find(".home-data-list__item.hide").removeClass("hide"),$(".home-data-list__show-more, .home-data-list__show-less").toggleClass("hide"),window.setTimeout(function(){return e.$dataList.addClass("home-data-list--expanded").css("max-height",i)},0)}},{key:"showLess",value:function(){var e=this.$dataList;e.one("transitionend",function(){e.removeClass("home-data-list__wrapper--expanded")}),e.css("max-height",this.truncatedHeight),$(".home-data-list__show-more, .home-data-list__show-less").toggleClass("hide")}},{key:"_truncatedHeight",value:function(){return this.truncatedHeight||(this.truncatedHeight=this.$dataList.height()),this.truncatedHeight}},{key:"_fullHeight",value:function(){if(!this.fullHeight){var e=1,t=this.$dataList.find("li.hide").length,i=this.$dataList.find("li").length-t-e
;this.fullHeight=this.truncatedHeight+this.truncatedHeight/i*t}return this.fullHeight}}]),e}();n["default"]=a,Shopify.DataList=null!=n["default"]?n["default"]:n}),e(function(e,a){"use strict";function o(e){e.each(function(e,t){r["default"].bind(t)})}Object.defineProperty(a,"__esModule",{value:!0});var s=n($),r=n(Twine),l=5,u=function(){function e(t){i(this,e),this.timesRetried=0,this.$feedNode=(0,s["default"])(".skeleton-feed"),this.onFeedLoaded=t}return t(e,[{key:"loadHomeFeed",value:function(){var e=this;return new Promise(function(t){s["default"].ajax({type:"GET",url:"/admin/home/feed",dataType:"html",success:function(i,n,a){if(a.getResponseHeader("Shopify-Auth-Mechanisms"))e.retry();else{e.$feedNode.hide().html(i).show(),e.$feedNode.addClass("skeleton-feed--is-loaded");o(e.$feedNode.find(".ui-feed, .home-theme-wrapper")),e.onFeedLoaded(),(0,s["default"])(document).trigger("page:load"),t(i)}},error:function(t){t.status>=500&&e.timesRetried<l?e.retry():Shopify.Flash.error("Error loading Home feed. Please try again later.")}})})}},{key:"retry",value:function(){var e=this;setTimeout(function(){e.timesRetried++,e.loadHomeFeed()},1e3*this.timesRetried)}}]),e}();a["default"]=u,Shopify.Skeleton=null!=a["default"]?a["default"]:a}),e(function(e,t){"use strict";function i(e){var t=h.nowShop().moment,i=void 0,n=void 0;switch(e){case"today":i=t.clone(),n=i;break;case"yesterday":i=t.clone().subtract(1,"day"),n=i;break;case"this_week":i=a("week"),n=o("week");break;case"this_month":i=a("month"),n=o("month");break;default:var s=e.split(","),u=l(s,2),d=u[0],c=u[1];i=r(d),n=r(c)}return{startMoment:i,endMoment:n}}function a(e){return h.nowShop().moment.clone().startOf(e)}function o(e){return h.nowShop().moment.clone().endOf(e)}function r(e){return h.fromShop((0,u["default"])(e)).moment.clone()}Object.defineProperty(t,"__esModule",{value:!0}),t.toDateRange=i,t.absoluteStartOf=a,t.absoluteEndOf=o;var u=n(moment),h=s(p);Shopify.HomeSidebarDateUtils=null!=t["default"]?t["default"]:t})),S=e(function(e,t){"use strict";function i(e){return c.withDelimiter(e)}function a(e){return c.condensed(e)}function o(e,t){return t?(100*e).toFixed(t)+"%":Math.floor(100*e)+"%"}function r(e){return d["default"].format(e,d["default"].moneyUnencodedFormat())}function l(e){var t=void 0;return e>=0?d["default"].condensed(e,d["default"].moneyUnencodedFormat()).trim():(t=Math.abs(e),"\u2212"+(t=d["default"].condensed(t,d["default"].moneyUnencodedFormat()).trim()))}function u(e){return 0!==e.indexOf("https://")&&0!==e.indexOf("http://")?e:e.substring(e.indexOf("/")+2)}function h(e){var t=f.toDateRange(e),i=t.startMoment,n=t.endMoment;return i.isSame(n)?i.format(p):i.month()===n.month()?i.format(p)+"\u2013"+n.format(_):i.format(p)+"\u2013"+n.format(p)}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNumber=i,t.formatNumberCondensed=a,t.formatPercentage=o,t.formatMoney=r,t.formatMoneyCondensed=l,t.formatLink=u,t.formatDate=h;var d=n(m),c=s(v),f=s(b),p="MMM D",_="D";Shopify.HomeSidebarFormatter=null!=t["default"]?t["default"]:t}),C=e(function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=s(y),o="shopify-home",r="shopify-home-live",l=function(){function e(t,n){i(this,e),this._poll=this._poll.bind(this),this.handleData=this.handleData.bind(this),this.options=t,this.onDataReceived=n,this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX,this.querySource=r,this.pollingDisabled=t.pollingDisabled}return t(e,[{key:"startPolling",value:function(){var e=this;this.querySource=o,this.timeout=window.setTimeout(function(){e._poll(),e.querySource=r},0)}},{key:"stopPolling",value:function(){this.mostRecentTotalSales=null,this.mostRecentTotalVisits=null,window.clearTimeout(this.timeout)}},{key:"handleData",value:function(e){var t=e.ast,i=e.metadata,n=e.result;if(this._validateResponse(t)){var a=n.data,o=i.recency.delay;if(a&&a[0]){var s=this._transformData(a);this._hasChanged(s)?(this.onDataReceived(s),this.pollFrequencyIndex=this.DEFAULT_POLL_FREQUENCY_INDEX):this.pollFrequencyIndex!==this.POLL_FREQUENCIES.length-1&&this._boostPollFrequency(o)}this.pollingDisabled||(this.timeout=window.setTimeout(this._poll,this.POLL_FREQUENCIES[this.pollFrequencyIndex]))}}},{key:"_poll",value:function(){return a.query(this._query(),"queries",this.querySource).then(this.handleData.bind(this))}},{key:"_query",value:function(){throw new Error("Subclasses of PollableMetric must define a query")}},{key:"_validateResponse",value:function(e){return e.columns[0].alias.split("_").pop()===this.options.endDate}},{key:"_transformData",value:function(e){return e}},{key:"_sumColumnData",value:function(e,t){return e.reduce(function(e,i){return e+i[t]},0)}},{key:"_getHourlyData",value:function(e,t){return e.map(function(e){return e[t]})}},{key:"_isCurrent",value:function(e,t){return e<=t}},{key:"_boostPollFrequency",value:function(e){this._isCurrent(e,60)?this.pollFrequencyIndex++:this.longerPollFrequencyIndex++}},{key:"_hasChanged",value:function(e){var t=void 0,i=void 0;if(e.totalSales||0===e.totalSales){if(t=e.totalSales,null!=this.mostRecentTotalSales&&this.mostRecentTotalSales===t)return!1;this.mostRecentTotalSales=t}else{if(i=e.totalVisits,null!=this.mostRecentTotalVisits&&this.mostRecentTotalVisits===i)return!1;this.mostRecentTotalVisits=i}return!0}},{key:"_hoursInPeriod",value:function(){var e=(0,p.nowShop)().moment;if("today"===this.options.startDate||"today"===this.options.endDate)return e.hours()+1;var t=(0,p.fromShop)(this.options.startDate).moment,i=(0,p.fromShop)(this.options.endDate).moment.endOf("day");return e.isBetween(t,i)||e.isSame(t)?e.diff(t,"hours")+1:i.diff(t,"hours")+1}}]),e}();n["default"]=l,l.prototype.POLL_FREQUENCIES=[5e3,1e4,3e4,6e4],l.prototype.DEFAULT_POLL_FREQUENCY_INDEX=0,Shopify.PollableMetric=null!=n["default"]?n["default"]:n}),N=e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(C),l=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"_query",value:function(){return!!this.options.hasOnlineStore&&'SHOW total_sessions AS "total_sessions_'+this.options.endDate+'" OVER hour(timestamp) AS hour FROM visits SINCE '+this.options.startDate+" UNTIL "+this.options.endDate+" ORDER BY hour ASC LIMIT "+this._hoursInPeriod()}},{key:"_transformData",value:function(e){return{totalVisits:this._sumColumnData(e,1),visits:this._getHourlyData(e,1)}}}]),n}(r["default"]);s["default"]=l,l.prototype.DEFAULT_POLL_FREQUENCY_INDEX=1,Shopify.PollableVisitsMetric=null!=s["default"]?s["default"]:s}),I=e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(C),l=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"_query",value:function(){return'SHOW total_sales AS "total_sales_'+this.options.endDate+'", total_orders AS "total_orders_'+this.options.endDate+'" OVER hour(hour) AS hour FROM sales SINCE '+this.options.startDate+" UNTIL "+this.options.startDate+" ORDER BY hour ASC LIMIT "+this._hoursInPeriod()}},{key:"_transformData",value:function(e){return{totalSales:this._sumColumnData(e,1),totalOrders:this._sumColumnData(e,2),sales:this._getHourlyData(e,1),orders:this._getHourlyData(e,2)}}}]),n}(r["default"]);s["default"]=l,l.prototype.DEFAULT_POLL_FREQUENCY_INDEX=1,Shopify.PollableSalesMetric=null!=s["default"]?s["default"]:s}),A=e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n(_),s=2,r=function(){function e(t,n,a,o){i(this,e),this.node=t.find("."+n+"-sparkline"),$(this.node).empty(),this.containerWidth=this.node.outerWidth(),this.containerHeight=this.node.outerHeight(),this.pathCoordinates=a.slice(0,-1),this.valueCount=this.pathCoordinates.length,this.showAnimation=o,this.interpolatedPath="",this.interpolatedPathClosing="",this.endPoint={},this._calcSparkline(),this._createSparkline(n)}return t(e,[{key:"_createSparkline",value:function(e){var t="home-sparkline";this.showAnimation&&(t+=" home-sparkline--animation"),this._buildSVGelement("svg",{viewbox:"0 0 "+this.containerWidth+" "+this.containerHeight,"class":t},this.node),this._buildSVGelement("path",{d:this.interpolatedPath+this.interpolatedPathClosing,"class":"area"},this.node.find("svg")),this._buildSVGelement("path",{d:this.interpolatedPath,"class":"line "+e+"-line","data-cat":e},this.node.find("svg")),this._buildSVGelement("circle",{cx:this.endPoint.cx,cy:this.endPoint.cy,r:this.endPoint.radius,"class":"end-point"},this.node.find("svg"))}},{key:"_buildSVGelement",value:function(e,t,i){var n=document.createElementNS("http://www.w3.org/2000/svg",e);if($(n).attr(t),$(n).hasClass("line")&&this.showAnimation){var a=n.getTotalLength();$(n).css({"stroke-dashoffset":a+"px","stroke-dasharray":a+"px"})}i.append(n)}},{key:"_calcSparkline",value:function(){for(var e=[],t=[],i=[],n=[],a=[],r=[],l=o["default"].max(this.pathCoordinates),u=o["default"].min(this.pathCoordinates),h=Math.max(l,0)+Math.abs(Math.min(u,0)),d=this.containerHeight/h,c=this.containerWidth/(this.valueCount-1),f=Math.max(l,0)*d,p=0;p<this.pathCoordinates.length;p++)e[p]=p*c,t[p]=f-this.pathCoordinates[p]*d;this._line(e[e.length-1],f),this._line(0,f),this._circle(e[e.length-1],t[t.length-1],s);for(var m=0;m<this.pathCoordinates.length-1;m++)a[m]=t[m+1]-t[m],r[m]=e[m+1]-e[m],n[m]=a[m]/r[m];i[0]=n[0],i[this.pathCoordinates.length-1]=n[this.pathCoordinates.length-2];for(var _=1;_<this.pathCoordinates.length-1;_++)0===n[_]||0===n[_-1]||n[_-1]>0!=n[_]>0?i[_]=0:(i[_]=3*(r[_-1]+r[_])/((2*r[_]+r[_-1])/n[_-1]+(r[_]+2*r[_-1])/n[_]),isFinite(i[_])||(i[_]=0));this._move(e[0],t[0]);for(var v=0;v<this.pathCoordinates.length-1;v++)this._curve(e[v]+r[v]/3,t[v]+i[v]*r[v]/3,e[v+1]-r[v]/3,t[v+1]-i[v+1]*r[v]/3,e[v+1],t[v+1])}},{key:"_curve",value:function(e,t,i,n,a,o){this.interpolatedPath+="C"+e+","+t+" "+i+","+n+" "+a+","+o+" "}},{key:"_move",value:function(e,t){this.interpolatedPath+="M"+e+","+t+" "}},{key:"_line",value:function(e,t){this.interpolatedPathClosing+="L"+e+","+t+" "}},{key:"_circle",value:function(e,t,i){this.endPoint={cx:e,cy:t,radius:i}}}]),e}();a["default"]=r,Shopify.Sparkline=null!=a["default"]?a["default"]:a}),P=e(function(e,a){"use strict";function o(e,t){return Math.floor(r(e,t))||1}function r(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;return Math.max((e-t)/50,.01)}Object.defineProperty(a,"__esModule",{value:!0});var l=n(Twine),h=n($),d=s(p),c=s(S),f=n(N),m=n(I),_=n(A),v=/^[+-]?[$][0-9]{1,3}(?:,?[0-9]{3})*(?:\.[0-9]{2})$/,y=function(){function e(t,n){var a=this;i(this,e);var o=(0,h["default"])(t).closest(".page")[0];this.options=n,this.$node=(0,h["default"])(t),this.stopPolling=this.stopPolling.bind(this),this._updateData=this._updateData.bind(this),this.data={totalSales:null,totalOrders:null},this.humanized={},this.salesDataFeed=new m["default"](this.options,this._updateData),this.options.hasOnlineStore&&(this.data.totalVisits=null,this.visitsDataFeed=new f["default"](this.options,this._updateData)),this.options.inactive?u.rootDispatcher.register(this.ACTIVATE_GREETING_EVENT,this._initialize.bind(this)):this._initialize(),Page.onReplace(o,function(){a.stopPolling()})}return t(e,[{key:"startPolling",value:function(){this.resetData=!0,this.salesDataFeed.startPolling(),this.visitsDataFeed&&this.visitsDataFeed.startPolling()}},{key:"stopPolling",value:function(){this.salesDataFeed.stopPolling(),this.visitsDataFeed&&this.visitsDataFeed.stopPolling()}},{key:"_initialize",value:function(){this.startPolling()}},{key:"_updateData",value:function(e){var t=Object.keys(e);if(this.resetData)return this.resetData=!1,this.animateSparkline=!0,this._updateValues(e),this._humanizeDataAndRefresh(),void this._drawSparklines(t);var i=t[0],n=null===this.data[i],a=e[i]<this.data[i];this.animateSparkline=!1,a||n?(this._updateValues(e),this._humanizeDataAndRefresh(),this._drawSparklines(t)):this._animateUpdateAndRefresh(e)}},{key:"_animateUpdateAndRefresh",value:function(e){var t=this,i=void 0,n=void 0,a=void 0;e.totalSales&&(a=r(e.totalSales,this.data.totalSales)),e.totalVisits&&(n=o(e.totalVisits,this.data.totalVisits)),e.totalOrders&&(i=o(e.totalOrders,this.data.totalOrders));var s=0,l=function o(){s++,a&&(t.data.totalSales+=a),n&&(t.data.totalVisits+=n),i&&(t.data.totalOrders+=i),t.data.totalSales>e.totalSales||t.data.totalVisits>e.totalVisits||t.data.totalOrders>e.totalOrders||s>=50?(t._updateValues(e),t._humanizeDataAndRefresh(),t._drawSparklines(Object.keys(e))):(t._humanizeDataAndRefresh(),window.requestAnimationFrame(o))};window.requestAnimationFrame(l)}},{key:"_updateValues",value:function(e){(e.totalSales||0===e.totalSales)&&(this.data.totalSales=e.totalSales),(e.totalVisits||0===e.totalVisits)&&(this.data.totalVisits=e.totalVisits),(e.totalOrders||0===e.totalOrders)&&(this.data.totalOrders=e.totalOrders),(e.orders||0===e.orders)&&(this.data.orders=e.orders),(e.sales||0===e.sales)&&(this.data.sales=e.sales),(e.visits||0===e.visits)&&(this.data.visits=e.visits)}},{key:"_humanizeDataAndRefresh",value:function(){if(this.data.totalSales||0===this.data.totalSales){var e=c.formatMoney(this.data.totalSales);this.humanized.totalSales=this._formatCommonCurrency(e)}return(this.data.totalVisits||0===this.data.totalVisits)&&(this.humanized.totalVisits=c.formatNumber(this.data.totalVisits)),(this.data.totalOrders||0===this.data.totalOrders)&&(this.humanized.totalOrders=c.formatNumber(this.data.totalOrders)),this.takeoverActive&&this._humanizeLiveView(),this.humanized.date=d.nowShop().moment.format("MMM D"),l["default"].refresh()}},{key:"_drawSparklines",value:function(e){if(this.$node.hasClass("home-takeover-greeting")){var t=!0,i=!1,n=undefined;try{for(var a,o=e[Symbol.iterator]();!(t=(a=o.next()).done);t=!0){var s=a.value;if(["sales","orders","visits"].includes(s)){var r=0===this.$node.find("."+s+"-sparkline").children().length,l=this.animateSparkline||r;new _["default"](this.$node,s,this.data[s],l)}}}catch(e){i=!0,n=e}finally{try{!t&&o["return"]&&o["return"]()}finally{if(i)throw n}}}}},{key:"_formatCommonCurrency",value:function(e){return null==this.shouldFormat&&(this.shouldFormat=v.test(e)),this.shouldFormat?e.substring(0,e.indexOf(".")):e}}]),e}();a["default"]=y,y.prototype.ACTIVATE_GREETING_EVENT="home:greeting:activate",Shopify.TodayFeature=null!=a["default"]?a["default"]:a}),w=e(function(e,s){"use strict";function r(e){var t=e[0],i=c[t],n=e[1];return[i,p[n],e[2],e[3]]}function u(e){return e[Math.floor(Math.random()*e.length)]}Object.defineProperty(s,"__esModule",{value:!0});var h=n(C),d=9e3,c={"List of Collections":"collections list page",Collection:"collection page",Product:"product page","Blog Index":"blog index page","Blog Article":"blog article",Checkout:"checkout page",Search:"search results page",Homepage:"home page",Cart:"cart","Customer Account":"customer account","Custom Page":"custom page",Unknown:"page"},f={"collections list page":["viewed a","was just on a","looked at a"],"collection page":["viewed a","was just on a","looked at a"],"product page":["viewed a","was just on a","looked at a"],"blog index page":["viewed your","was just on a","looked at your"],"blog article":["viewed your","was just on a","looked at your"],"checkout page":["viewed the","was just on the","looked at the"],"search results page":["viewed the","was just on a","looked at a"],"home page":["viewed your","was just on your","looked at your"],cart:["viewed their","was just on their","looked at their"],"customer account":["viewed their","was just on their","looked at their"],"custom page":["viewed a","was just on a","looked at a"],page:["viewed a","was just on a","looked at a"]},p={"Game Console":"gaming console",Mobile:"phone",Tablet:"tablet",Desktop:"computer"},m=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"pollManually",value:function(){window.setTimeout(this._poll,0)}},{key:"handleData",value:function(e){var t=e.result,i=t.data[0];if(i){var n=this._transformData(i);this.onDataReceived(n)}else window.setTimeout(this.pollManually.bind(this),d)}},{key:"_query",value:function(){return'SHOW page_type, form_factor, city, country, timestamp FROM pageviews WHERE page_type != "" AND country != "" AND city != "" AND form_factor != "" SINCE -10s UNTIL 0s ORDER BY timestamp DESC LIMIT 1'}},{key:"_transformData",value:function(e){var t=r(e),i=l(t,4),n=i[0],a=i[1],o=i[2],s=i[3],h=["Someone","A visitor","A person"],d=["from "+o+", "+s,"on their "+a];return u(h)+" "+u(d)+" "+u(f[n])+" "+n+"."}}]),n}(h["default"]);s["default"]=m,Shopify.PollableVisitorTickerMetric=null!=s["default"]?s["default"]:s}),R=e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(C),l=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"pollManually",value:function(){window.setTimeout(this._poll,0)}},{key:"handleData",value:function(e){var t=e.result,i=t.data[0];if(i){var n=this._transformData(i);this.onDataReceived(n)}}},{key:"_query",value:function(){return"SHOW total_active_sessions FROM pageviews SINCE -300s UNTIL 0s"}},{key:"_transformData",value:function(e){return{totalLiveVisits:e[0]}}}]),n}(r["default"]);s["default"]=l,Shopify.PollableLiveVisitsMetric=null!=s["default"]?s["default"]:s}),M=(e(function(e,s){"use strict";function h(){return(0,p.nowShop)().moment.format("YYYY-MM-DD")===O}Object.defineProperty(s,"__esModule",{value:!0});var d=n($),c=n(Twine),f=n(P),m=n(window.SafeLocalStorage),_=n(w),v=n(R),y={FIGURE:"home-takeover-data__figure",SPARKLINE:"sparkline-wrapper",LOW_VOLUME_ICON:"home-takeover-data__icon",FIGURE_CAPTION_VALID_DATA:"valid-data",FIGURE_CAPTION_NO_DATA:"no-data",BUTTONS:"home-takeover-stats__button",ACTIVE:"home-takeover-stats__button--is-active",LIVE_VISITS:"home-takeover-live__number",VISITOR_TICKER:"home-takeover-ticker",VISITOR_TICKER_VISIBLE:"home-takeover-ticker--visible",VISITOR_TICKER_HIDING:"home-takeover-ticker--hiding"},g=4,O="2017-11-28",T={ACTIVE_TAB:"takeoverActiveTab",ACTIVE_TAB_TUESDAY:"takeoverActiveTabTuesday",RANGE_TAB:"home-takeover-stats__button--range",TODAY_TAB:"home-takeover-stats__button--today"},E=3e4,k=5500,D=2100,b=function(e){function n(e,t){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return a.$node=(0,d["default"])(e),a.takeoverActive=!0,a.originalStartDate=a.options.startDate,a.originalEndDate=a.options.endDate,a._getActiveTab(),a._setQueryDateRangeAndPoll(),a}return a(n,e),t(n,[{key:"tabbedView",value:function(e){this._storeTab(e),h()&&this._setDebriefGreeting(),this._reloadSkeletonContent(),this._setQueryDateRangeAndPoll()}},{key:"startPolling",value:function(){r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"startPolling",this).call(this),this.options.hasOnlineStore&&(this.pollLiveVisits=!0,this.$visitorTicker.on("transitionend",this._handleLiveSessionsTransitionEnd.bind(this)),this.$liveSessions.length&&this.liveSessionsFeed.pollManually())}},{key:"stopPolling",value:function(){r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"stopPolling",this).call(this),this.options.hasOnlineStore&&(this.pollLiveVisits=!1,this.$visitorTicker.off("transitionend"))}},{key:"_initialize",value:function(){var e=this;this.options.hasOnlineStore&&(this._initializeLiveSessions(),this._initializeVisitorTicker()),u.rootDispatcher.register(this.ACTIVATE_GREETING_EVENT,function(){e.stopPolling()}),this.startPolling()}},{key:"_initializeLiveSessions",value:function(){this.$liveSessions=(0,d["default"])("."+y.LIVE_VISITS),this.liveSessionsFeed=new v["default"]({},this._updateSessionsFeed.bind(this))}},{key:"_initializeVisitorTicker",value:function(){this.$visitorTicker=(0,d["default"])("."+y.VISITOR_TICKER),this.$visitorTicker.length&&(this.visitorTickerFeed=new _["default"]({},this._showVisitorTicker.bind(this)),this.visitorTickerFeed.pollManually())}},{key:"_handleLiveSessionsTransitionEnd",value:function(e){var t=this;"opacity"===e.originalEvent.propertyName&&(this.$visitorTicker.hasClass(y.VISITOR_TICKER_HIDING)?window.setTimeout(function(){t._resetVisitorTicker(),t.visitorTickerFeed.pollManually()},D):window.setTimeout(this._hideVisitorTicker.bind(this),k))}},{key:"_updateSessionsFeed",value:function(e){this.humanized.totalLiveVisits=e.totalLiveVisits;var t=e.totalLiveVisits.toString().length;t>6?this.$liveSessions.addClass("home-takeover-live__number--extra-small"):t>5?this.$liveSessions.addClass("home-takeover-live__number--small"):this.$liveSessions.removeClass("home-takeover-live__number--extra-small home-takeover-live__number--small"),this._refreshLiveSessions()}},{key:"_refreshLiveSessions",value:function(){var e=this;window.setTimeout(function(){e.pollLiveVisits&&e.liveSessionsFeed.pollManually()},E)}},{key:"_showVisitorTicker",value:function(e){this.$visitorTicker.text(e).addClass(y.VISITOR_TICKER_VISIBLE)}},{key:"_hideVisitorTicker",value:function(){this.$visitorTicker.addClass(y.VISITOR_TICKER_HIDING)}},{key:"_resetVisitorTicker",value:function(){var e=[y.VISITOR_TICKER_VISIBLE,y.VISITOR_TICKER_HIDING];this.$visitorTicker.removeClass(e.join(" "))}},{key:"_storeTab",value:function(e){var t=e.classList[1],i=h()?T.ACTIVE_TAB_TUESDAY:T.ACTIVE_TAB;m["default"].set(i,t),this.selectedTab=t}},{key:"_reloadSkeletonContent",value:function(){for(var e=["sales","orders","visits"],t=0;t<e.length;t++){var i=e[t],n="total"+(i[0].toUpperCase()+i.slice(1));delete this.data[i],delete this.data[n],delete this.humanized[n]}(0,d["default"])("."+y.SPARKLINE).html(""),c["default"].refresh()}},{key:"_setDebriefGreeting",value:function(){this.options.content&&(this.selectedTab===T.TODAY_TAB?(this.debriefGreetingByline=this.options.content.today.byline,this.debriefGreetingTitle=this.options.content.today.title):(this.debriefGreetingByline=this.options.content.friday_monday.byline,this.debriefGreetingTitle=this.options.content.friday_monday.title))}},{key:"_getActiveTab",value:function(){var e=h()?T.ACTIVE_TAB_TUESDAY:T.ACTIVE_TAB,t=h()?T.TODAY_TAB:T.RANGE_TAB;this.selectedTab=m["default"].get(e,t),h()&&this._setDebriefGreeting()}},{key:"_setQueryDateRangeAndPoll",value:function(){this.selectedTab===T.RANGE_TAB&&(this.options.startDate=this.originalStartDate,this.options.endDate=this.originalEndDate),this.selectedTab===T.TODAY_TAB&&(this.options.startDate="today",this.options.endDate="today"),this.stopPolling(),this.startPolling(),this._highlightCurrentTab()}},{key:"_highlightCurrentTab",value:function(){(0,d["default"])("."+y.BUTTONS).removeClass(y.ACTIVE),this.selectedTab?(0,d["default"])("."+this.selectedTab).addClass(y.ACTIVE):(0,d["default"])("."+y.BUTTONS).first().addClass(y.ACTIVE)}},{key:"_dataVolumeThreshold",value:function(){var e={belowSparklineThreshold:[],noData:[]};return Object.entries(this.data).forEach(function(t){var i=l(t,2),n=i[0],a=i[1];Array.isArray(a)?a.filter(function(e){return e>0}).length<=g&&e.belowSparklineThreshold.push(n):null!=a&&a<=0&&e.noData.push(n)}),e}},{key:"_humanizeLiveView",value:function(){this.volumeThresholds=this._dataVolumeThreshold(),this._showSparklines(),this._showIconsAndLabels()}},{key:"_invalidSparklines",value:function(){return this.volumeThresholds.belowSparklineThreshold.length}},{key:"_showSparklines",value:function(){this._invalidSparklines()?(0,d["default"])("."+y.SPARKLINE).addClass("hide"):(0,d["default"])("."+y.SPARKLINE).removeClass("hide")}},{key:"_drawSparklines",value:function(e){this._invalidSparklines()||r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_drawSparklines",this).call(this,e)}},{key:"_showIconsAndLabels",value:function(){var e=this,t=this.volumeThresholds.noData;(0,d["default"])("."+y.LOW_VOLUME_ICON).addClass("hide"),(0,d["default"])("."+y.FIGURE_CAPTION_NO_DATA).addClass("hide"),(0,d["default"])("."+y.FIGURE_CAPTION_VALID_DATA).removeClass("hide"),t.forEach(function(t,i){e.humanized[t]=" ",(0,d["default"])("."+y.LOW_VOLUME_ICON).eq(i).removeClass("hide"),(0,d["default"])("."+y.FIGURE_CAPTION_NO_DATA).eq(i).removeClass("hide"),(0,d["default"])("."+y.FIGURE_CAPTION_VALID_DATA).eq(i).addClass("hide")})}}]),n}(f["default"]);s["default"]=b,Shopify.TakeOver=null!=s["default"]?s["default"]:s}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s=n(_),r=n(P),l={PAGE:"page",HOME_GREETING:"home-greeting",ORIGINAL_GREETING:"fresh-home-greeting",TAKEOVER_GREETING:"home-takeover-greeting",TAKEOVER_CONTENT:"home-takeover-greeting__wrapper",FEEDBACK:"home-theme-overlay--feedback",FEEDBACK_HEADING:"home-theme-overlay__heading",FEEDBACK_CONTENT:"home-theme-overlay__content--feedback",FEEDBACK_INPUT:"home-theme-overlay__comment",RESOLUTION:"home-theme-overlay--resolution",RESOLUTION_CONTENT:"home-theme-overlay__content--resolution",DISMISS_CONTENT:"home-theme-overlay__content--opt-out",OPT_OUT:"home-theme-overlay--opt-out",INVISIBLE:"home-theme-overlay--hidden"},h={ANIMATION:200,HIDE:3e3},d=1,c=function(){function e(t,n){i(this,e),this.$node=(0,o["default"])(t),this.$greetingParentNode=this.$node.closest("."+l.HOME_GREETING),this.options=n,this.options.tag_name="bfcm",this.feedbackGiven=!1,this.fromOptOutPage=!1,this.$takeoverGreeting=this.$node.closest("."+l.TAKEOVER_GREETING),this.$feedback=this.$node.find("."+l.FEEDBACK),this.$feedbackHeading=this.$node.find("."+l.FEEDBACK_HEADING),this.$feedbackContent=this.$node.find("."+l.FEEDBACK_CONTENT),this.$feedbackInput=this.$node.find("."+l.FEEDBACK_INPUT),this.$dismissContent=this.$node.find("."+l.DISMISS_CONTENT),this.$resolution=this.$node.find("."+l.RESOLUTION),this.$resolutionContent=this.$node.find("."+l.RESOLUTION_CONTENT),this.$optOut=this.$node.find("."+l.OPT_OUT),this._calcHeights(),(0,o["default"])(window).on("resize.calcHeights",s["default"].throttle(this._calcHeights.bind(this),200));var a=this.$node.closest("."+l.PAGE)[0];Page.onReplace(a,this._stopCalcHeights)}return t(e,[{key:"openFeedbackOverlay",value:function(e){var t=this;u.Popover.deactivate(),this.feedbackGiven=!0,this.$feedbackHeading.text(e),this.$greetingParentNode.animate({height:this.tallestOverlay,"min-height":this.tallestOverlay},{duration:h.ANIMATION,start:function(){t.$feedback.removeClass(l.INVISIBLE)}})}},{key:"sendFeedback",value:function(){var e=this.$feedbackInput.val();this.feedbackGiven=!0,this._takeOverOptOutFeedback(e),this.showResolution()}},{key:"showResolution",value:function(){var e=this;this.resolutionHeight=this.$resolutionContent.outerHeight(),this.$greetingParentNode.animate({height:this.resolutionHeight,"min-height":this.resolutionHeight},{duration:h.ANIMATION,start:function(){e.$resolution.removeClass(l.INVISIBLE),e.$optOut.addClass(l.INVISIBLE)},complete:function(){e.fromOptOutPage?e.closeTakeOver():setTimeout(function(){e.backToTakeover()},h.HIDE)}})}},{key:"backToTakeover",value:function(){var e=this;this.$greetingParentNode.animate({height:this.originalTakeOverHeight,"min-height":this.originalTakeOverHeight},{duration:h.ANIMATION,start:function(){e.$optOut.addClass(l.INVISIBLE),e.$feedback.addClass(l.INVISIBLE),setTimeout(function(){e.$resolution.addClass(l.INVISIBLE)},h.ANIMATION)},complete:function(){e._calcHeights()}})}},{key:"closeTakeOver",value:function(){var e=this;this.$greetingParentNode.animate({height:this.resolutionHeight,"min-height":this.resolutionHeight},{duration:h.ANIMATION,start:function(){e.$optOut.addClass(l.INVISIBLE),e.$feedback.addClass(l.INVISIBLE)},complete:function(){setTimeout(function(){e.$takeoverGreeting.remove()},h.HIDE)}})}},{key:"undo",value:function(){this.fromOptOutPage=!1,this._undoOptOut(),this.backToTakeover()}},{key:"gotIt",value:function(){this.feedbackGiven=!0,this.remove()}},{key:"remove",value:function(){var e=this;this.feedbackGiven?this.feedbackHeight=this.originalGreetingHeight:this.feedbackHeight=this.originalTakeOverHeight,this.$greetingParentNode.animate({height:this.feedbackHeight,"min-height":this.feedbackHeight},{duration:h.ANIMATION,start:function(){e.feedbackGiven&&(u.rootDispatcher.dispatch({type:r["default"].prototype.ACTIVATE_GREETING_EVENT}),e.$takeoverGreeting.fadeOut(h.ANIMATION,function(){e.$takeoverGreeting.remove()}))},complete:function(){e.$greetingParentNode.css({height:"","min-height":""}),e._stopCalcHeights(),e.feedbackGiven||e.undo()}})}},{key:"dismiss",value:function(){var e=this;this.fromOptOutPage=!0,u.Popover.deactivate(),this._takeOverOptOut(),this.$greetingParentNode.animate({height:this.tallestOverlay,"min-height":this.tallestOverlay},{duration:h.ANIMATION,start:function(){e.$optOut.removeClass(l.INVISIBLE)}})}},{key:"_calcHeights",value:function(){if(this._noDismissState()){this.originalGreetingHeight=(0,o["default"])("."+l.ORIGINAL_GREETING).outerHeight()+d,this.originalTakeOverHeight=(0,o["default"])("."+l.TAKEOVER_CONTENT).outerHeight()+d,this.$greetingParentNode.height(this.originalTakeOverHeight),this.$greetingParentNode.css("min-height",this.originalTakeOverHeight);var e=this.$dismissContent.outerHeight()+d,t=this.$feedbackContent.outerHeight()+d;this.tallestOverlay=Math.max(e,t)}}},{key:"_noDismissState",value:function(){return this.$optOut.hasClass(l.INVISIBLE)&&this.$feedback.hasClass(l.INVISIBLE)&&this.$resolution.hasClass(l.INVISIBLE)}},{key:"_stopCalcHeights",value:function(){(0,o["default"])(window).off("resize.calcHeights")}},{key:"_takeOverOptOut",value:function(){this._postDataToUrl(this.options.dismiss_tag_url)}},{key:"_undoOptOut",value:function(){this._postDataToUrl(this.options.undo_dismiss_tag_url)}},{key:"_takeOverOptOutFeedback",value:function(e){this.options.comment=e,this._postDataToUrl(this.options.submit_dismiss_tag_url)}},{key:"_postDataToUrl",value:function(e){var t=this.options,i=t.tag_name,n=t.comment;o["default"].ajax({url:e,type:"POST",data:{tag_name:i,comment:n}})}}]),e}();a["default"]=c,Shopify.TakeoverDismissal=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s={PAGE:"page",OPT_OUT:"home-theme-overlay--opt-out",OPT_OUT_CONTENT:"home-theme-overlay__content--opt-out",FEEDBACK:"home-theme-overlay--feedback",FEEDBACK_CONTENT:"home-theme-overlay__content--feedback",FEEDBACK_INPUT:"home-theme-overlay__comment",RESOLUTION:"home-theme-overlay--resolution",RESOLUTION_CONTENT:"home-theme-overlay__content--resolution",HOME_THEME:"home-theme",HOME_FEED_CARD:"ui-feed__item--card",COUNTDOWN:"home-theme-countdown",COUNTDOWN_NUMBER:"number",COUNTDOWN_NUMBER_LEFT:"number__left",COUNTDOWN_NUMBER_RIGHT:"number__right",COUNTDOWN_OVER:"home-theme-wrapper--countdown-over",INVISIBLE:"home-theme-overlay--hidden",HIDE:"hide"},r={ANIMATION:200,HIDE:3e3},l=function(){function e(t,n){var a=this;i(this,e),this.$node=(0,o["default"])(t),this.$optOut=this.$node.find("."+s.OPT_OUT),this.$optOutContent=this.$node.find("."+s.OPT_OUT_CONTENT),this.$feedback=this.$node.find("."+s.FEEDBACK),this.$feedbackContent=this.$node.find("."+s.FEEDBACK_CONTENT),this.$feedbackInput=this.$node.find("."+s.FEEDBACK_INPUT),this.$resolution=this.$node.find("."+s.RESOLUTION),this.$resolutionContent=this.$node.find("."+s.RESOLUTION_CONTENT),this.$featuredCard=this.$node.find("."+s.HOME_THEME+" ."+s.HOME_FEED_CARD),this.options=n;var r=this.$optOutContent.outerHeight(),l=this.$feedbackContent.outerHeight();this.tallestOverlay=Math.max(r,l);var u=this.$node.closest("."+s.PAGE)[0],h=this.options.countdown_in_seconds;this.countdown=new Map([["days",0],["hours",0],["minutes",0],["seconds",0]]),this.countdownInterval=window.setInterval(function(){h<=0&&(a._stopInterval(),a._calcFeaturedCardMaxHeight(),setTimeout(function(){a.$node.addClass(s.COUNTDOWN_OVER)},0)),a._calcHumanizedCountdown(h),h--},1e3),window.setTimeout(function(){a.$node.find("."+s.COUNTDOWN+" ."+s.COUNTDOWN_NUMBER).css({opacity:1})},1e3),Page.onReplace(u,this._stopInterval.bind(this))}return t(e,[{key:"optOut",value:function(){var e=this;this._themeOptOut(),this.originalHeight=this.$node.outerHeight(),this.$featuredCard.addClass(s.HIDE),this.$node.animate({height:this.tallestOverlay,"min-height":this.tallestOverlay},{duration:r.ANIMATION,start:function(){e.$optOut.removeClass(s.INVISIBLE)}})}},{key:"openFeedbackOverlay",value:function(){var e=this;this.$node.animate({height:this.tallestOverlay,"min-height":this.tallestOverlay},{duration:r.ANIMATION,start:function(){e.$feedback.removeClass(s.INVISIBLE)}})}},{key:"sendFeedback",value:function(){var e=this,t=this.$feedbackInput.val();this._themeOptOutFeedback(t),this.resolutionHeight=this.$resolutionContent.outerHeight(),this.$node.animate({height:this.resolutionHeight,"min-height":this.resolutionHeight},{duration:r.ANIMATION,start:function(){
e.$resolution.removeClass(s.INVISIBLE)},complete:function(){setTimeout(function(){e.remove()},r.HIDE)}})}},{key:"undo",value:function(){var e=this;this.$featuredCard.removeClass(s.HIDE),this._undoOptOut(),this.$node.animate({height:this.originalHeight,"min-height":this.originalHeight},{duration:r.ANIMATION,start:function(){e.$optOut.addClass(s.INVISIBLE),e.$feedback.addClass(s.INVISIBLE)},complete:function(){e.$node.css({height:"","min-height":""})}})}},{key:"remove",value:function(){var e=this;this.$node.animate({opacity:0,height:0,"min-height":0},{duration:r.ANIMATION,complete:function(){e.$node.remove()}})}},{key:"_themeOptOut",value:function(){this._postDataToUrl(this.options.dismiss_tag_url)}},{key:"_undoOptOut",value:function(){this._postDataToUrl(this.options.undo_dismiss_tag_url)}},{key:"_themeOptOutFeedback",value:function(e){this.options.comment=e,this._postDataToUrl(this.options.submit_dismiss_tag_url)}},{key:"_postDataToUrl",value:function(e){var t=this.options,i=t.tag_name,n=t.comment;o["default"].ajax({url:e,type:"POST",data:{tag_name:i,comment:n}})}},{key:"_stopInterval",value:function(){window.clearInterval(this.countdownInterval)}},{key:"_calcHumanizedCountdown",value:function(e){var t=e,i=new Map([["days",86400],["hours",3600],["minutes",60],["seconds",1]]),n=!0,a=!1,o=undefined;try{for(var s,r=this.countdown.keys()[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var l=s.value,u=i.get(l),h=Math.floor(t/u),d=h>=10?h:"0"+h;this.countdown.set(l,d),t%=u}}catch(e){a=!0,o=e}finally{try{!n&&r["return"]&&r["return"]()}finally{if(a)throw o}}this._updateCountdown()}},{key:"_updateCountdown",value:function(){var e=!0,t=!1,i=undefined;try{for(var n,a=this.countdown.keys()[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var r=n.value;(0,o["default"])("."+r+" ."+s.COUNTDOWN_NUMBER_LEFT).html(String(this.countdown.get(r))[0]),(0,o["default"])("."+r+" ."+s.COUNTDOWN_NUMBER_RIGHT).html(String(this.countdown.get(r))[1])}}catch(e){t=!0,i=e}finally{try{!e&&a["return"]&&a["return"]()}finally{if(t)throw i}}}},{key:"_calcFeaturedCardMaxHeight",value:function(){var e=this.$featuredCard.outerHeight();this.$featuredCard.css("max-height",e)}}]),e}();a["default"]=l,Shopify.HomeTheme=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s=n(window.SafeLocalStorage),r={HOLIDAYS_TOOLTIP:"holidaysTooltip",HOLIDAYS_TOOLTIP_VISIBLE:"",HOLIDAYS_TOOLTIP_HIDDEN:"hide"},l=function(){function e(t){i(this,e),this.$node=(0,o["default"])(t),this.$tooltips=(0,o["default"])(t).find(".home-card-tooltip-holidays"),this.holidayTooltipState=s["default"].get(r.HOLIDAYS_TOOLTIP,r.HOLIDAYS_TOOLTIP_VISIBLE),this.holidayTooltipState===r.HOLIDAYS_TOOLTIP_HIDDEN&&this._hideTooltip()}return t(e,[{key:"dismissTooltip",value:function(){s["default"].set(r.HOLIDAYS_TOOLTIP,r.HOLIDAYS_TOOLTIP_HIDDEN),this.holidayTooltipState=s["default"].get(r.HOLIDAYS_TOOLTIP,r.HOLIDAYS_TOOLTIP_HIDDEN),this._hideTooltip()}},{key:"_hideTooltip",value:function(){this.$tooltips.addClass("hide")}}]),e}();a["default"]=l,Shopify.HomeThemeHolidays=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n(Bugsnag),s=function(){function e(t,n){i(this,e),this.task=t,this.checked=n,this.dismissed=!1}return t(e,[{key:"revertCheckedState",value:function(){this.checked=!this.checked,o["default"].notify("GoalTaskCheckFailed","Failed to check")}}]),e}();a["default"]=s,Shopify.GoalTask=null!=a["default"]?a["default"]:a})),H=(e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s=n(M),r=n(window.SafeLocalStorage),l="goals_overlay-dismissed",u="goals_expanded",h=function(){function e(t,n){var a=n.handle,s=n.id,h=n.locked,d=n.lockUrl,c=n.inProgress,f=n.shopUnlocked,p=n.completionOverlay,m=n.complete,_=n.defaultExpansion;i(this,e),this.$node=(0,o["default"])(t),this.id=s,this.handle=a,this.locked=h,this.lockUrl=d,this.shopUnlocked=f,this.tasks={},this.completionOverlay=p,this.overlayKey=l+"_"+a,this.overlayDismissed=r["default"].get(this.overlayKey,!1),this.goalKey=u+"_"+a,this.expanded=this.setDefaultExpandedState(c,_),this.completionOverlay&&m&&!this.overlayDismissed&&this.showCompletedOverlay()}return t(e,[{key:"isExpanded",value:function(){return this.expanded}},{key:"setDefaultExpandedState",value:function(e,t){var i="fallback",n=r["default"].get(this.goalKey,i);return n!==i?n:this.complete?Boolean(e):t}},{key:"toggleExpandedState",value:function(){this.locked||(this.expanded=!this.expanded,r["default"].set(this.goalKey,this.expanded))}},{key:"addTask",value:function(e,t){this.tasks[e]=new s["default"](e,t)}},{key:"isChecked",value:function(e){return this.tasks[e]&&this.tasks[e].checked}},{key:"isDismissed",value:function(e){return this.tasks[e]&&this.tasks[e].dismissed}},{key:"allChecked",value:function(){var e=this;return Object.keys(this.tasks).reduce(function(t,i){return t&&(e.isChecked(i)||e.isDismissed(i))},!0)}},{key:"dismissGoal",value:function(){var e=this;this.$node.slideUp(300),o["default"].post((0,g.dismiss_goal)(this.id).html).fail(function(){Shopify.Flash.error("Something went wrong."),e.$node.slideDown(300)})}},{key:"tasksCompleted",value:function(){var e=this;return Object.keys(this.tasks).reduce(function(t,i){return t+(e.isChecked(i)&&!e.isDismissed(i))},0)}},{key:"numTasks",value:function(){var e=this;return Object.keys(this.tasks).reduce(function(t,i){return t+!e.isDismissed(i)},0)}},{key:"status",value:function(){return this.allChecked()?"COMPLETED":this.tasksCompleted()+" of "+this.numTasks()}},{key:"checkGoalCompletion",value:function(){this.completionOverlay&&this.allChecked()&&!this.overlayDismissed&&this.showCompletedOverlay()}},{key:"hideCompletedOverlay",value:function(){this.overlayShown=!1,this.overlayDismissed=!0,r["default"].set(this.overlayKey,this.overlayDismissed)}},{key:"showCompletedOverlay",value:function(){this.expanded=!0,this.overlayShown=!0}},{key:"showDismiss",value:function(){return this.allChecked()||this.shopUnlocked}},{key:"toggleState",value:function(e,t){var i=this,n=this.tasks[e];n.checked=t.target.checked,t.target.checked?o["default"].post((0,g.check_goal_task)().html,{task_handle:e}).success(function(){i.checkGoalCompletion()}).fail(function(){n.revertCheckedState()}):o["default"].post((0,g.uncheck_goal_task)().html,{task_handle:e}).fail(function(){n.revertCheckedState()})}},{key:"dismissTask",value:function(e){var t=this;this.tasks[e].dismissed=!0,o["default"].post((0,g.dismiss_goal_task)().html,{task_handle:e}).success(function(){t.checkGoalCompletion()})}},{key:"showDismissConfirm",value:function(e){return this.tasks[e].showConfirm}},{key:"showConfirmation",value:function(e){this.tasks[e].showConfirm=!0}},{key:"hideConfirmation",value:function(e){this.tasks[e].showConfirm=!1}},{key:"lockNavigation",value:function(){this.locked&&this.lockUrl&&!Shopify.Browser.isMobile()&&(document.location=this.lockUrl)}}]),e}();a["default"]=h,Shopify.Goal=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n($),s="dismiss_show_feed_button",r=function(){function e(t,n){var a=n.requestId;i(this,e),this.cardConsumptionRequestId=a,this.$feedNode=(0,o["default"])(".skeleton-feed"),this.$node=(0,o["default"])(t)}return t(e,[{key:"dismissShowFeedButton",value:function(){this.$node.addClass("is-loading").attr("disabled",!0),this.$feedNode.removeClass("hide"),this.$node.addClass("hide");var e=new Shopify.Home(this.cardConsumptionRequestId);new Shopify.Skeleton(e.onFeedLoaded.bind(e)).loadHomeFeed(),o["default"].ajax({type:"DELETE",url:"/admin/dismissible_element?"+o["default"].param({handle:s})})}}]),e}();a["default"]=r,Shopify.FeedVisibility=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";function o(e,t){var i=e.clone().startOf(t),n=e.clone().endOf(t),a=f;return i.month()===n.month()&&(a=m),i.format(f)+"\u2013"+n.format(a)}Object.defineProperty(a,"__esModule",{value:!0});var r=n(moment),h=n(Twine),d=s(p),c=s(O),f="MMM D",m="D",_=function(){function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"today";i(this,e),this.onDateChanged=this.onDateChanged.bind(this),this.selectedDate=n,u.rootDispatcher.register(this.constructor.DATE_CHANGED_EVENT,this.onDateChanged).bindToNode(t),this._initFormattedDates(),this._updateLabel()}return t(e,[{key:"changeDate",value:function(e){return u.rootDispatcher.dispatch({type:this.constructor.DATE_CHANGED_EVENT,data:e})}},{key:"onDateChanged",value:function(e){var t=!0,i=e.data.split(","),n=l(i,2);return n[0]===n[1]&&(t=this.selectedDate===e.data),this.selectedDate=e.data,this._updateLabel(),t&&u.Popover.deactivate(),h["default"].refresh()}},{key:"_updateLabel",value:function(){if(-1===this.selectedDate.indexOf(","))this.dateLabel=c.titleize(this.selectedDate,!0);else{var e=this.selectedDate.split(","),t=l(e,2),i=t[0],n=t[1];if(this.dateLabel=d.fromShop((0,r["default"])(i)).formatInShop(f),i===n)return;(0,r["default"])(i).month()===(0,r["default"])(n).month()?this.dateLabel+="\u2013"+d.fromShop((0,r["default"])(n)).formatInShop(m):this.dateLabel+="\u2013"+d.fromShop((0,r["default"])(n)).formatInShop(f)}}},{key:"_initFormattedDates",value:function(){var e=d.nowShop().moment;this.formatted={today:e.format(f),yesterday:e.clone().subtract(1,"days").format(f),this_week:o(e,"week"),this_month:o(e,"month")}}}]),e}();_.DATE_CHANGED_EVENT="home:sidebar:date-changed",a["default"]=_,Shopify.HomeSidebarDatepicker=null!=a["default"]?a["default"]:a})),L=e(function(e,h){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var d=n(Bugsnag),c=n(Shopify.SummaryReport),f=n(H),p=s(b),m=s(S),_="YYYY-MM-DD",v=function(e){function n(e,t){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return a.channelId=t.channelId,a.homeSidebar=t.homeSidebar,a.widgetViewName=t.widgetViewName,a.widgetErrorMessage=t.widgetErrorMessage,a._newDateSelected=a._newDateSelected.bind(a),a._newDateSelected({data:a.homeSidebar.initialDate}),a.ready=!0,a.URL_REGEX=/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,4}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/,u.rootDispatcher.register(f["default"].DATE_CHANGED_EVENT,a._newDateSelected).bindToNode(e),a}return a(n,e),t(n,[{key:"changeChannelProvider",value:function(e){if(this.homeSidebar.setActiveChannel(e.data),this.homeSidebar.showOther){for(var t,i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];(t=r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"changeChannelProvider",this)).call.apply(t,[this,e].concat(a))}else{var s=e.data.split("-"),u=l(s,2),h=u[0],d=u[1];"all"===h?this.queryProps.channelFilter="":(this.queryProps.channelFilter="WHERE api_client_id == "+h,d&&(this.queryProps.channelFilter+=" AND location_id == '"+d+"'")),this._load()}}},{key:"renderError",value:function(e){e&&e instanceof Error&&d["default"].notifyException(e),this.errorTemplate&&this.append(this.errorTemplate)}},{key:"_load",value:function(){if(this.ready&&this.homeSidebar.isActive(this.channelId)){for(var e,t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];(e=r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"_load",this)).call.apply(e,[this].concat(i))}}},{key:"_newDateSelected",value:function(e){switch(this.homeSidebar.setActiveDate(e.data,m.formatDate(e.data)),e.data){case"today":return this.changeDateRange({data:{startDate:"0d",endDate:"0d"}});case"yesterday":return this.changeDateRange({data:{startDate:"-1d",endDate:"-1d"}});case"this_week":return this.changeDateRange({data:{startDate:p.absoluteStartOf("week").format(_),endDate:p.absoluteEndOf("week").format(_)}});case"this_month":return this.changeDateRange({data:{startDate:p.absoluteStartOf("month").format(_),endDate:p.absoluteEndOf("month").format(_)}});default:var t=e.data.split(","),i=l(t,2),n=i[0],a=i[1];return this.changeDateRange({data:{startDate:n,endDate:a}})}}}]),n}(c["default"]);h["default"]=v,Shopify.HomeSidebarReport=null!=h["default"]?h["default"]:h}),F=e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(L),u=s(S),h=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Unknown'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\n         BY referrer_host\n         FROM visits\n         WHERE referrer_source == 'Unknown'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data[0][0],n=e[1].result.data;if(!n.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var a=n.map(function(e){return{referrerURL:function(){return null==e[0].match(t.URL_REGEX)?undefined:"http://"+u.formatLink(e[0])}(),referrerName:u.formatLink(e[0]),referrerCount:u.formatNumberCondensed(e[1]),percentage:u.formatPercentage(e[1]/i)}}),o=a.filter(function(e){return"0%"!==e.percentage});this.append(this.resultTemplate,{referrers:o})}}]),n}(l["default"]);r["default"]=h,Shopify.HomeTopReferrersReport=null!=r["default"]?r["default"]:r}),V=(e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(F),l=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalEmbeds:"SHOW total_visitors\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topEmbeds:"SHOW total_visitors BY embedded_path\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_visitors DESC\n         LIMIT 3"}}}]),n}(r["default"]);s["default"]=l,Shopify.HomeBuyButtonTopEmbedLinksReport=null!=s["default"]?s["default"]:s}),e(function(e,r){"use strict";function l(e,t){var i="sales"===t?"order":"view";return h.formatNumberCondensed(e)+" "+d.pluralize(e,i)}Object.defineProperty(r,"__esModule",{value:!0});var u=n(L),h=s(S),d=s(O),c=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{topProducts:"SHOW gross_sales, total_quantity\n         BY product_id, product_title, variant_title\n         FROM sales\n         "+this.queryProps.channelFilter+" "+(this.queryProps.channelFilter?"AND":"WHERE")+" sale_line_type == 'product'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_quantity DESC\n         LIMIT 3"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetViewName:this.widgetViewName});var n=i.map(function(e,n){return{id:e[0],name:e[1],variant:"Default Title"===e[2]?null:e[2],sales:h.formatMoney(e[3]),metric:l(e[4],t.widgetViewName),isLastEntry:n===i.length-1}});this.append(this.resultTemplate,{products:n})}}]),n}(u["default"]);r["default"]=c,Shopify.HomeTopProductsReport=null!=r["default"]?r["default"]:r})),x=e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n($),u=n(V),h=s(S),d=s(g),c=function(e){function n(e,t){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return a.channelId=t.channelId,a.channelName=t.channelName,a.homeSidebar=t.homeSidebar,a.widgetViewName=t.widgetViewName,a.queryProps.channelName=a.channelName,a}return a(n,e),t(n,[{key:"queries",value:function(){return{topProducts:"SHOW total_views BY product_id\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_views DESC\n         LIMIT 3"}}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetViewName:this.widgetViewName});var n=i.map(function(e){return e[0]});this._loadProductTitles(n).then(function(e){return i.map(function(t,n){return{id:t[0],views:h.formatNumberCondensed(t[1]),name:e[t[0]],isLastEntry:n===i.length-1}})}).then(function(e){return t.append(t.resultTemplate,{products:e})}).fail(this.renderError.bind(this))}},{key:"_loadProductTitles",value:function(e){return l["default"].ajax({url:d.products().json+"?ids="+e.join(",")+"&fields=id,title",type:"GET",dataType:"json"}).then(function(e){var t={};return e.products.forEach(function(e){t[e.id]=e.title}),t})}}]),n}(u["default"]);r["default"]=c,Shopify.HomeTopViewedProductsReport=null!=r["default"]?r["default"]:r}),B=(e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(x),u=s(S),h=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{topProducts:"SHOW total_visitors BY product_id\n         FROM buy_button_impression\n         WHERE product_id != 0\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_visitors DESC\n         LIMIT 3"}}},{key:"renderResult",value:function(e){var t=this,i=e[0].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetViewName:this.widgetViewName});var n=i.map(function(e){return e[0]});this._loadProductTitles(n).then(function(e){return i.map(function(t,n){return{id:t[0],views:u.formatNumberCondensed(t[1]),name:e[t[0]],isLastEntry:n===i.length-1}})}).then(function(e){return t.append(t.resultTemplate,{products:e})}).fail(this.renderError.bind(this))}}]),n}(l["default"]);r["default"]=h,Shopify.HomeBuyButtonTopViewedProductsReport=null!=r["default"]?r["default"]:r}),e(function(e,t){"use strict";function i(e,t){var i=Math.abs(t-e);if(e<0){i*=1+1/E.yAxisTickCount}var n=i/(E.yAxisTickCount-1);n=o(n,r(n)/2,i);var a=Math.ceil(Math.abs(e)/n);return(0,g["default"])({from:0,to:E.yAxisTickCount,inclusive:!1}).map(function(e,t){return(t-a)*n}).reverse()}function a(e,t){return e.map(function(e,i){return{value:t(e),visible:i%2==0}})}function o(e,t,i){var n=Math.floor(i);if(n<=E.yAxisRange.small)return E.yAxisStepInterval.small;if(n<=E.yAxisRange.medium)return E.yAxisStepInterval.medium;var a=Math.ceil(e),o=a%t,s=Math.round(a+t-o);return Math.max(s,E.yAxisStepInterval.large)}function r(e){return Math.pow(10,Math.ceil(e).toString().length-1)}function u(e){function t(e,t){var i=l(t,2),n=(i[0],i[1]);return Math.min(e,n)}return Math.min(0,e.reduce(t,0))}function h(e){function t(e,t){var i=l(t,2),n=(i[0],i[1]);return Math.max(e,n)}return Math.max(0,e.reduce(t,0))}function d(e){var t="hour"===e.columns[0].field,i=k.day;return t&&(i+=" "+k.hour),{tooltipDateFormat:i,xAxisDateFormat:t?k.hour:k.dayCondensed}}function c(e){return e>E.removeSpacingBreakpoint?0:e>E.reduceSpacingBreakpoint?1:Math.max(Math.floor(E.reduceSpacingBreakpoint/e),2)}function f(e,t){var i=Math.abs(e)/t*E.height;return Math.round(Math.max(i,E.minBarHeight))}function m(e,t){var i=Math.round(100*e/t);return i=Math.max(i,E.minTooltipPositionPercent),i=Math.min(i,E.maxTooltipPositionPercent)}function v(e){var t=[0,e-1];if(e>=7)t.push(Math.floor(Number(e)/3)),t.push(Math.floor(2*e/3));else{var i=!0,n=!1,a=undefined;try{for(var o,s=(0,g["default"])({from:1,to:e-2,inclusive:!0})[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var r=o.value;t.push(r)}}catch(e){n=!0,a=e}finally{try{!i&&s["return"]&&s["return"]()}finally{if(n)throw a}}}return t}Object.defineProperty(t,"__esModule",{value:!0});var y=n(_),g=n(T),O=s(p),E={height:101,minBarHeight:2,minGraphHeight:10,minTooltipPositionPercent:10,maxTooltipPositionPercent:90,fixXAxisBreakpoint:20,reduceSpacingBreakpoint:40,removeSpacingBreakpoint:90,yAxisTickCount:6,yAxisNoDataStepHeight:1,yAxisLowDataStepHeight:2,yAxisStepInterval:{small:1,medium:2,large:5},yAxisRange:{small:5,medium:10}},k={day:"MMMM D, YYYY",dayCondensed:"MMM D",hour:"ha"};t["default"]=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=void 0;if(!(t=e.dataFormatters))throw new Error("HomeGraphHelper requires dataFormatters to format values and the y-axis.");return function(n){var o=n.data.length,s=E.height/(E.yAxisTickCount-1),r=i(u(n.data),h(n.data)),p=r[0],_=y["default"].last(r),g=p-_,T={type:e.type||"sales",hasManyPoints:o>E.fixXAxisBreakpoint,barSpacing:c(o),bars:[],originPosition:Math.round(r.indexOf(0)*s),xAxis:[],yAxis:a(r,t.formatYAxisValue)},k=O.nowShop().moment,D=d(n),b=D.tooltipDateFormat,S=D.xAxisDateFormat;return n.data.forEach(function(e,i){var n=l(e,3),a=n[0],s=n[1],r=n[2],u=void 0,h=void 0,d=O.fromShop(a).moment.isAfter(k);return d||(h={date:O.fromShop(a).moment.format(b),horizontalPosition:m(i,o),primaryValue:t.formatPrimaryValue(s)},t.formatSecondaryValue&&(h.secondaryValue=t.formatSecondaryValue(r))),T.bars.push({rawValue:s,height:f(s,g),tooltip:h,inFuture:d}),v(o).includes(i)&&(u=O.fromShop(a).moment.format(S)),T.xAxis.push(u||"")}),T}},Shopify.HomeGraphTransformer=null!=t["default"]?t["default"]:t})),j=(e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(L),u=n(B),h=s(S),d=s(O),c=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){var e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day";return{visits:"SHOW total_sessions, total_visitors\n         OVER "+t+"(viewed_at)\n         AS "+t+"\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+t+" ASC",totalVisits:"SHOW total_sessions\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalVisitors:"SHOW total_visitors\n         FROM buy_button_impression\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var e={formatPrimaryValue:function(e){return h.formatNumber(e)+" "+d.pluralize(e,"visit")},formatSecondaryValue:function(e){return h.formatNumber(e)+" visitors"},formatYAxisValue:function(e){return h.formatNumberCondensed(e)}};this.transformGraphData=(0,u["default"])({type:"visits",dataFormatters:e}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[1].result.data,i=e[2].result.data;i?this.append(this.resultTemplate,{visits:h.formatNumber(t),visitors:h.formatNumber(i),graph:this.transformGraphData(e[0].result)}):this.append(this.noDataTemplate)}}]),n}(l["default"]);r["default"]=c,Shopify.HomeBuyButtonVisitorsReport=null!=r["default"]?r["default"]:r}),e(function(e,r){"use strict";function h(e){e.stopPropagation()}Object.defineProperty(r,"__esModule",{value:!0});var d=n(Twine),c=n(_),f=n($),p=n(L),m=n(Shopify.SummaryReportChannelpicker),v=s(S),y=s(O),g="2",T=function(e){function n(e,t){i(this,n);var a=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return a.channels=t.channels.filter(function(e){return"All channels"!==e.name}),a.showOther=t.showOther,a}return a(n,e),t(n,[{key:"queries",value:function(){var e=this,t={};return this.channels.forEach(function(i){return t[i.name+"-"+i.id]=e._salesAndOrdersQuery(i.id),t[i.name+"-"+i.id]}),t}},{key:"initializeView",value:function(){(0,f["default"])(".page__sidebar").on("click",".home-channel-summary__link",h),this.resultTemplate=this.createTemplate(".js-template-success"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t={};this.channels.forEach(function(i,n){var a=l(e[n].result.data[0],2),o=a[0],s=a[1];i.id[0]===g&&(i.name=i.name.replace(/Point of sale/,"Shopify POS")),t[i.name+"-"+i.id]=c["default"].assign(i,{sales:""+v.formatMoney(o),orders:v.formatNumberCondensed(s)+" "+y.pluralize(s,"order")})});var i=this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,channels:t});d["default"].bind(i.find(".js-button-wrapper")[0])}},{key:"changeChannel",value:function(e){u.rootDispatcher.dispatch({type:m["default"].CHANNEL_CHANGED_EVENT,data:e})}},{key:"_salesAndOrdersQuery",value:function(e){var t=e.split("-"),i=l(t,2),n=i[0],a=i[1],o=this.showOther?"channel_provider_id":"api_client_id",s="WHERE "+o+" == "+n;return a&&(s+=" AND location_id == "+a),'\n       SHOW\n         total_sales AS "sales '+e+'",\n         total_orders AS "orders '+e+'"\n       FROM sales\n       '+s+"\n       SINCE "+this.queryProps.startDate+"\n       UNTIL "+this.queryProps.endDate}}]),n}(p["default"]);r["default"]=T,Shopify.HomeChannelsSummaryReport=null!=r["default"]?r["default"]:r}),e(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n(L),r=function(e){function t(e,n){i(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return a.channelId=n.channelId,a.channelName=n.channelName,a.homeSidebar=n.homeSidebar,a.queryProps.channelName=a.channelName,a}return a(t,e),t}(s["default"]);t["default"]=r,Shopify.HomeSidebarEngagementsReport=null!=t["default"]?t["default"]:t})),U=e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=n(j),h=s(S),d=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{views:'SHOW total_views, total_clicks\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == "'+this.queryProps.channelName+'"\n         SINCE '+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalPurchased:'SHOW total_orders\n         FROM sales\n         WHERE api_client_title == "'+this.queryProps.channelName+'"\n         SINCE '+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=l(e[0].result.data[0],2),i=t[0],n=t[1],a=e[1].result.data[0][0];if(0===i)return void this.append(this.noDataTemplate);var o={reachedCheckout:n.toLocaleString(),reachedCheckoutPercentage:h.formatPercentage(n/i,2),purchased:a.toLocaleString(),purchasedPercentage:h.formatPercentage(a/i,2)};this.append(this.resultTemplate,o)}}]),n}(u["default"]);r["default"]=d,Shopify.HomeConversionReport=null!=r["default"]?r["default"]:r}),q=(e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(L),u=s(S),h=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalMarketingCampaigns:"SHOW total_sessions\n         FROM visits\n         WHERE utm_campaign_name != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topMarketingCampaigns:"SHOW total_sessions\n         BY utm_campaign_name\n         FROM visits\n         WHERE utm_campaign_name != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=e[0].result.data[0][0],i=e[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(e){return{referrerName:e[0],referrerCount:u.formatNumberCondensed(e[1]),percentage:u.formatPercentage(e[1]/t)}});this.append(this.resultTemplate,{referrers:n})}}]),n}(l["default"]);r["default"]=h,Shopify.HomeMarketingCampaignsReport=null!=r["default"]?r["default"]:r}),e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=n(U),h=s(S),d=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{sessionsFunnel:"SHOW total_sessions, total_carts, total_reached_checkouts\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalPurchased:"SHOW total_orders\n         FROM sales\n         WHERE api_client_title == 'Online Store'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"renderResult",value:function(e){var t=l(e[0].result.data[0],3),i=t[0],n=t[1],a=t[2],o=e[1].result.data[0][0];if(0===i)return void this.append(this.noDataTemplate);var s={addsToCart:n.toLocaleString(),addsToCartPercentage:h.formatPercentage(n/i,2),reachedCheckout:a.toLocaleString(),reachedCheckoutPercentage:h.formatPercentage(a/i,2),purchased:o.toLocaleString(),purchasedPercentage:h.formatPercentage(o/i,2)};this.append(this.resultTemplate,s)}}]),n}(u["default"]);r["default"]=d,Shopify.HomeOnlineStoreConversionReport=null!=r["default"]?r["default"]:r}),e(function(e,a){"use strict";function o(){return h["default"].get(p,c)}Object.defineProperty(a,"__esModule",{value:!0});var s=n($),r=n(Twine),l=n(Shopify.SummaryReportChannelpicker),h=n(window.SafeLocalStorage),d="today",c="all",f="homeSidebarDate",p="homeSidebarChannel",m="cid",_=function(){function e(t,n,a){i(this,e),this._updateChannelPicker=this._updateChannelPicker.bind(this),this._initialShowEvent=this._initialShowEvent.bind(this),this._showPickers=this._showPickers.bind(this),this.setActiveChannel=this.setActiveChannel.bind(this),this.node=t,this.showOther=a.showOther;var o=n.map(function(e){return e.id});this.currentChannelId=this._getInitialChannelId(o),this.initialDate=h["default"].get(f,d),u.rootDispatcher.register(l["default"].AFTER_CHANNEL_CHANGED_EVENT,this._initialShowEvent),setTimeout(this._updateChannelPicker,0)}return t(e,[{key:"setActiveDate",value:function(e,t){this.formattedDate=t,h["default"].set(f,e)}},{key:"setActiveChannel",value:function(e){this.currentChannelId=e,h["default"].set(p,this.currentChannelId)}},{key:"isActive",value:function(e){return e===this.currentChannelId}},{key:"_updateChannelPicker",value:function(){this._setChannelPickerLabel()}},{key:"_setChannelPickerLabel",value:function(){u.rootDispatcher.dispatch({type:l["default"].CHANNEL_CHANGED_EVENT,data:this.currentChannelId})}},{key:"_initialShowEvent",value:function(e){e.data===this.currentChannelId&&(r["default"].refresh(),this._showPickers(),u.rootDispatcher.remove(l["default"].CHANNEL_CHANGED_EVENT,this._initialShowEvent))}},{key:"_showPickers",value:function(){return(0,s["default"])(this.node).removeClass("next-card--home-channel-filters--loading")}},{key:"_getInitialChannelId",value:function(e){for(var t=[this._channeldIdFromUrl,o],i=0;i<t.length;i++){var n=t[i],a=n.call(this);if(-1!==e.indexOf(a))return a}return c}},{key:"_channeldIdFromUrl",value:function(){var e=this._urlParams().filter(function(e){return e.split("=")[0]===m})[0];if(e){var t=e.split("=")[1];return decodeURIComponent(t)}return null}},{key:"_urlParams",value:function(){return window.location.search.substring(1).split("&")}}]),e}();a["default"]=_,Shopify.HomeSidebar=null!=a["default"]?a["default"]:a}),e(function(e,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var o=n(moment),s=n(_),r=n($),h=n(E),d=n(T),c=n(H),f="MMMM YYYY",p="e",m="YYYY-MM-DD",v=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],y=function(){function e(t,n){i(this,e),this.$calendar=(0,r["default"])(t).find(".js-home-calendar"),
this._initTemplate(t),this._initEvents(t),this._loadDateRange({data:n.selectedDate})}return t(e,[{key:"nextMonth",value:function(){return this._loadMonthFor(this.lastOfMonth.add(1,"day"))}},{key:"prevMonth",value:function(){return this._loadMonthFor(this.firstOfMonth.subtract(1,"day"))}},{key:"_initTemplate",value:function(e){var t=(0,r["default"])(e).find(".js-template-calendar").remove();return this.template=s["default"].template(t.html()),this.template}},{key:"_initEvents",value:function(e){var t=this;u.rootDispatcher.register(c["default"].DATE_CHANGED_EVENT,this._loadDateRange.bind(this)).bindToNode(e),this.$calendar.on("click",".ui-button",this._dateClicked.bind(this)),h["default"].onReplace(e,function(){return t.$calendar.off("click")})}},{key:"_loadDateRange",value:function(e){var t=e.data,i=(0,o["default"])().startOf("day");switch(t){case"today":this.fromMoment=i,this.toMoment=i;break;case"yesterday":this.fromMoment=i.clone().subtract(1,"day"),this.toMoment=i.clone().subtract(1,"day");break;case"this_week":this.fromMoment=i.clone().startOf("week"),this.toMoment=i.clone().endOf("week").startOf("day");break;case"this_month":this.fromMoment=i.clone().startOf("month"),this.toMoment=i.clone().endOf("month").startOf("day");break;default:var n=t.split(","),a=l(n,2),s=a[0],r=a[1];this.fromMoment=(0,o["default"])(s),this.toMoment=(0,o["default"])(r)}return this._loadMonthFor(this.fromMoment)}},{key:"_render",value:function(e){var t={weeks:e,monthName:this.monthName,DAYS_OF_THE_WEEK:v};return this.$calendar.empty(),this.$calendar.append(this.template(t))}},{key:"_dateClicked",value:function(e){e.stopPropagation();var t=e.target.innerHTML.trim(),i=(0,o["default"])(new Date(this.firstOfMonth.year(),this.firstOfMonth.month(),t));return this.toMoment.isSame(this.fromMoment)&&i.isSame(this.toMoment)?this._updateDatepicker():this.toMoment.isSame(this.fromMoment)&&i.isAfter(this.fromMoment)?(this.toMoment=i,this._updateDatepicker()):(this.fromMoment=i,this.toMoment=i,this._updateDatepicker())}},{key:"_updateDatepicker",value:function(){var e=this.fromMoment.format(m)+",";return e+=""+this.toMoment.format(m),u.rootDispatcher.dispatch({type:c["default"].DATE_CHANGED_EVENT,data:e})}},{key:"_loadMonthFor",value:function(e){var t=[],i={},n=0;this.firstOfMonth=e.clone().startOf("month"),this.lastOfMonth=e.clone().endOf("month");var a=this.firstOfMonth.format(p);for(this.monthName=e.format(f);n<a;)i[v[n]]={date:""},n++;var o=!0,s=!1,r=undefined;try{for(var l,u=(0,d["default"])({from:1,to:this.lastOfMonth.date(),inclusive:!0})[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var h=l.value,c=this.firstOfMonth.clone().add(h-1,"days");i[v[n]]=this._dateWithMetadata(c),n++,7===n&&(n=0,t.push(i),i=h===this.lastOfMonth.date()?null:{})}}catch(e){s=!0,r=e}finally{try{!o&&u["return"]&&u["return"]()}finally{if(s)throw r}}if(i){for(;n<7;)i[v[n]]={date:""},n++;t.push(i)}return this._render(t)}},{key:"_dateWithMetadata",value:function(e){return{date:e.date(),isStart:e.isSame(this.fromMoment),isEnd:e.isSame(this.toMoment),isSelected:e.isAfter(this.fromMoment)&&e.isBefore(this.toMoment)}}}]),e}();a["default"]=y,Shopify.HomeSidebarCalendar=null!=a["default"]?a["default"]:a}),e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(L),u=s(S),h=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topCountries:"SHOW total_sessions\n         BY location_country\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=e[0].result.data[0][0],i=e[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(e){return{referrerName:e[0]||"Unknown",referrerCount:u.formatNumberCondensed(e[1]),percentage:u.formatPercentage(e[1]/t)}}),a=n.filter(function(e){return"0%"!==e.percentage});this.append(this.resultTemplate,{referrers:a})}}]),n}(l["default"]);r["default"]=h,Shopify.HomeTopCountriesReport=null!=r["default"]?r["default"]:r}),e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(L),u=s(S),h=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,landingPages:"SHOW total_sessions\n         BY page_path, host(page_url)\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=e[0].result.data[0][0],i=e[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(e){return{referrerURL:"http://"+e[1]+e[0],referrerName:u.formatLink(e[0])||"Frontpage ("+u.formatLink(e[1])+")",referrerCount:u.formatNumberCondensed(e[2]),percentage:u.formatPercentage(e[2]/t)}}),a=n.filter(function(e){return"0%"!==e.percentage});this.append(this.resultTemplate,{referrers:a})}}]),n}(l["default"]);r["default"]=h,Shopify.HomeTopLandingPagesReport=null!=r["default"]?r["default"]:r}),e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(L),u=s(S),h=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Search'\n         AND referrer_terms != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topSearchTerms:"SHOW total_sessions\n         BY referrer_terms\n         FROM visits\n         WHERE referrer_source == 'Search'\n         AND referrer_terms != ''\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data")}},{key:"renderResult",value:function(e){var t=e[0].result.data[0][0],i=e[1].result.data;if(!i.length)return void this.append(this.noDataTemplate,{widgetErrorMessage:this.widgetErrorMessage});var n=i.map(function(e){return{referrerName:u.formatLink(e[0]),referrerCount:u.formatNumberCondensed(e[1]),percentage:u.formatPercentage(e[1]/t)}}),a=n.filter(function(e){return"0%"!==e.percentage});this.append(this.resultTemplate,{referrers:a})}}]),n}(l["default"]);r["default"]=h,Shopify.HomeTopSearchReferrersReport=null!=r["default"]?r["default"]:r}),e(function(e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=n(F),l=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSessions:"SHOW total_sessions\n         FROM visits\n         WHERE referrer_source == 'Social'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,topReferrers:"SHOW total_sessions\n         BY referrer_name\n         FROM visits\n         WHERE referrer_source == 'Social'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_sessions DESC\n         LIMIT 5"}}}]),n}(r["default"]);s["default"]=l,Shopify.HomeTopSocialReferrersReport=null!=s["default"]?s["default"]:s}),e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(L),u=s(S),h="Point of Sale",d=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){var e=this.channelId.split("-")[1];return{topStaff:"SHOW total_orders, total_sales\n         BY employee_id, employee_name\n         FROM sales\n         WHERE api_client_title == '"+h+"'\n         AND location_id == "+e+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY total_orders DESC\n         LIMIT 3"}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[0].result.data;if(!t.length)return void this.append(this.noDataTemplate);var i=t.map(function(e,i){return{id:e[0],name:e[1],orderCount:u.formatNumberCondensed(e[2]),totalSales:u.formatMoney(e[3]),average:e[2]?u.formatMoney(e[3]/e[2]):"$0.00",isLastEntry:i===t.length-1}});this.append(this.resultTemplate,{staffMembers:i})}}]),n}(l["default"]);r["default"]=d,Shopify.HomeTopStaffReport=null!=r["default"]?r["default"]:r}),e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(j),u=n(B),h=s(S),d=s(O),c=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{views:"SHOW total_views\n         OVER day(occurred_on)\n         AS day\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY day ASC",totalViews:"SHOW total_views\n         FROM daily_channel_product_listing_engagements\n         WHERE api_client_title == '"+this.queryProps.channelName+"'\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var e={formatPrimaryValue:function(e){return h.formatNumber(e)+" "+d.pluralize(e,"view")},formatYAxisValue:function(e){return h.formatNumberCondensed(e)}};this.transformGraphData=(0,u["default"])({type:"visits",dataFormatters:e}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[0].result;if(!t.data.length)return void this.append(this.noDataTemplate);var i=h.formatNumber(e[1].result.data[0][0]),n=d.pluralize(i,"view");this.append(this.resultTemplate,{views:i+" "+n,graph:this.transformGraphData(t)})}}]),n}(l["default"]);r["default"]=c,Shopify.HomeViewsReport=null!=r["default"]?r["default"]:r}));e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(q),u=n(B),h=s(S),d=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){var e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day";return{totalSessions:"SHOW total_sessions\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,totalVisitors:"SHOW total_visitors\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate,visits:"SHOW total_sessions, total_visitors\n         OVER "+t+"(timestamp)\n         AS "+t+"\n         FROM visits\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+t+" ASC"}}},{key:"initializeView",value:function(){var e={formatPrimaryValue:function(e){return h.formatNumber(e)+" visits"},formatSecondaryValue:function(e){return h.formatNumber(e)+" visitors"},formatYAxisValue:function(e){return h.formatNumberCondensed(e)}};this.transformGraphData=(0,u["default"])({type:"visits",dataFormatters:e}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[0].result.data,i=e[1].result.data;if(!i)return void this.append(this.noDataTemplate);this.append(this.resultTemplate,{visits:h.formatNumber(t),visitors:h.formatNumber(i),graph:this.transformGraphData(e[2].result)})}}]),n}(l["default"]);r["default"]=d,Shopify.HomeOnlineStoreVisitorsReport=null!=r["default"]?r["default"]:r}),e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=n(L),u=s(O),h=s(S),d=n(B),c=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){var e=this.queryProps.startDate===this.queryProps.endDate,t=e?"hour":"day";return{sales:"SHOW total_sales\n         OVER "+t+"(processed_at)\n         AS "+t+"\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate+"\n         ORDER BY "+t+" ASC",totalSalesAndOrders:"SHOW total_sales, total_orders\n         FROM sales\n         "+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){var e={formatPrimaryValue:function(e){return h.formatMoney(e)},formatYAxisValue:function(e){return h.formatMoneyCondensed(e)}};this.transformGraphData=new d["default"]({dataFormatters:e}),this.resultTemplate=this.createTemplate(".js-template-success"),this.noDataTemplate=this.createTemplate(".js-template-success-no-data"),this.errorTemplate=this.createTemplate(".js-template-error")}},{key:"renderResult",value:function(e){var t=e[0].result;if(!t.data.length)return void this.append(this.noDataTemplate);var i=e[1].result,n=h.formatNumber(i.data[0][1]),a=u.pluralize(i.data[0][1],"order");this.append(this.resultTemplate,{total:h.formatMoney(i.data[0][0]),orders:n+" "+a,graph:this.transformGraphData(t)})}}]),n}(l["default"]);r["default"]=c,Shopify.HomeSalesReport=null!=r["default"]?r["default"]:r}),e(function(e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var u=n(L),h=s(S),d=function(e){function n(){return i(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return a(n,e),t(n,[{key:"queries",value:function(){return{totalSalesBreakdown:'SHOW\n           total_sales,\n           sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "order") THEN amount_after_discounts_after_tax)) AS order_sales,\n           sum((IF (sale_line_type IN ("product", "shipping", "unknown") AND sale_kind == "return") THEN amount_after_discounts_after_tax)) AS returns_amount,\n           count(DISTINCT (IF (sale_kind == "return") THEN order_id)) AS returns_count\n         FROM sales\n         '+this.queryProps.channelFilter+"\n         SINCE "+this.queryProps.startDate+"\n         UNTIL "+this.queryProps.endDate}}},{key:"initializeView",value:function(){this.resultTemplate=this.createTemplate(".js-template-success")}},{key:"renderResult",value:function(e){var t=e[0].result.data;if(!t.length)return void this.$node.hide();var i=l(t[0],4),n=i[0],a=i[1],o=i[2];i[3]>0?(this.append(this.resultTemplate,{formattedDate:this.homeSidebar.formattedDate,totalSales:h.formatMoney(n),sales:h.formatMoney(a),returnsAmount:h.formatMoney(o)}),this.$node.show()):this.$node.hide()}}]),n}(u["default"]);r["default"]=d,Shopify.HomeTotalSalesBreakdown=null!=r["default"]?r["default"]:r});(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};Shopify.SocialMarketingFrame=function(){function t(t,i){this.node=t,this.url=i,this.receive=e(this.receive,this),this.show=e(this.show,this),this.onLoad=e(this.onLoad,this),this.context=Twine.context(document.body),Shopify.rootDispatcher.register("SocialMarketingFrameOpen",this.show).bindToNode(this.node),window.addEventListener("message",this.receive)}return t.prototype.loaded=!1,t.prototype.onLoad=function(e){return""!==e.target.src&&(this.loaded=!0),Twine.refresh()},t.prototype.show=function(e){return null==e&&(e={}),null!=e.url?this.src=e.url:this.src=this.url,e.funnel&&(this.src=Shopify.UrlMangler.addQuery(Shopify.UrlMangler.getURL(this.src),{funnel:e.funnel})),Twine.refresh(),this.context.SocialMarketingModal.show()},t.prototype.receive=function(e){var t,i;try{t=JSON.parse(e.data)}catch(e){return}return t.closeMarketingModal&&(this.context.SocialMarketingModal.hide(),this.src="",this.loaded=!1),t.marketingFrameHeight&&(i=window.innerHeight-40,this.height=t.marketingFrameHeight<i?t.marketingFrameHeight:i),Twine.refresh()},t}()}).call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e="a, a *, input, button, [data-bind-event-click], [aria-haspopup], td.select, .ui-popover *",Shopify.NestedLinkContainer=function(){function i(e){var i;if(this.node=e,this.linkTo=t(this.linkTo,this),i=$(this.node),this.linkNode=i.find("a[data-nested-link-target]"),!this.linkNode.is("a"))throw new Error("NestedLinkContainer must be constructed with a node that is an <a> tag");i.on("click",this.linkTo)}return i.BLACK_LIST=e,i.prototype.linkTo=function(t){if(!($(t.target).filter(e).length>0||this._hasSelection()))return this.navigateTo()},i.prototype.navigateTo=function(){return this.linkNode[0].click()},i.prototype._hasSelection=function(){return window.getSelection().toString().length>0},i}()}.call(this);(function(){var e,t,i,n,a,o,s,r,l,u,h=function(e,t){return function(){return e.apply(t,arguments)}};e={TYPE:"data-collapsible",STATE:"data-collapsible-state",MAX_WIDTH:"data-collapsible-maxwidth",HIDDEN:"aria-hidden",BTN:{TARGET:"data-collapsible-target",EXPANDED:"aria-expanded",TEXT:{EXPANDED:"data-collapsible-text--expanded",COLLAPSED:"data-collapsible-text--collapsed"},ICON:{EXPANDED:"data-collapsible-icon--expanded",COLLAPSED:"data-collapsible-icon--collapsed"}}},t={BTN:{TEXT:"btn__text",ICON:"icon"}},n="collapsible:collapsed",a="collapsible:expanded",s={},l=function(e){return s[e.id]},o={},r=function(t){return o[t.getAttribute(e.BTN.TARGET)]},Shopify.Collapsible=function(){function t(t){var i;this.node=t,this._finishTransition=h(this._finishTransition,this),this._getHeight=h(this._getHeight,this),this.node,this.id=this.node.id,this.id&&(this.collapsed="collapsed"===this.node.getAttribute(e.STATE),this.dismissible="dismissible"===this.node.getAttribute(e.TYPE),i=this.node.getAttribute(e.MAX_WIDTH),this.maxwidth=i?parseInt(i,10):void 0,this.activator=null,this._pairActivator(),this._toggleAtWidth(),this._trackWidthResize())}return t.DISPATCHER_COLLAPSED_ACTION=n,t.DISPATCHER_EXPANDED_ACTION=a,t._collapsibleRefs=s,t.getCollapsibleRefForNode=l,t._activatorRefs=o,t.getActivatorForNode=r,t.prototype.toggle=function(e){return null==e&&(e=!0),this.collapsed?this.expand(e):this.collapse(e)},t.prototype.expand=function(t){return null==t&&(t=!0),this.collapsed?(this.activator&&this.activator.expand(),t?(this.node.addEventListener("transitionend",this._finishTransition),this.node.classList.add("collapsible--has-transition"),this.node.style.height=this._getHeight(),this.node.offsetHeight,requestAnimationFrame(function(t){return function(){return t.collapsed=!1,t.node.setAttribute(e.STATE,"expanded"),t.node.setAttribute(e.HIDDEN,"false"),Shopify.rootDispatcher.dispatch(t._generateTransitionEvent())}}(this))):(this.collapsed=!1,this.node.setAttribute(e.STATE,"expanded"),this.node.setAttribute(e.HIDDEN,"false"),this.activator.ready=!0,Shopify.rootDispatcher.dispatch(this._generateTransitionEvent()))):this},t.prototype.collapse=function(t){return null==t&&(t=!0),this.collapsed?this:(this.activator&&this.activator.collapse(),t?(this.node.addEventListener("transitionend",this._finishTransition),this.node.classList.add("collapsible--has-transition"),this.node.style.height=this._getHeight(),this.node.offsetHeight,requestAnimationFrame(function(t){return function(){return t.collapsed=!0,t.node.setAttribute(e.STATE,"collapsed"),t.node.setAttribute(e.HIDDEN,"true"),Shopify.rootDispatcher.dispatch(t._generateTransitionEvent())}}(this))):(this.collapsed=!0,this.node.setAttribute(e.STATE,"collapsed"),this.node.setAttribute(e.HIDDEN,"true"),this.activator.ready=!0,Shopify.rootDispatcher.dispatch(this._generateTransitionEvent()),this.dismissible&&this.collapsed?this.remove():void 0))},t.prototype.remove=function(){this.activator&&this.activator.remove(),s[this.id]=null,this.node.parentNode.removeChild(this.node)},t.prototype._getHeight=function(){var e;return e=this.node.scrollHeight,e+=parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-bottom"),10),(e+=parseInt(window.getComputedStyle(this.node).getPropertyValue("margin-top"),10))+"px"},t.prototype._finishTransition=function(e){if(e.target===this.node&&"height"===e.propertyName&&(this.node.removeEventListener("transitionend",this._finishTransition),this.node.classList.remove("collapsible--has-transition"),this.node.style.height=null,this.node.offsetHeight,this.activator.ready=!0,this.dismissible&&this.collapsed))return this.remove()},t.prototype._generateTransitionEvent=function(){return{type:this.collapsed?n:a,data:{collapsibleInstance:this}}},t.prototype._pairActivator=function(){var t;if(t=document.querySelector("["+e.BTN.TARGET+"='"+this.id+"']"))return o[this.id]=new i(t,this),this.activator=o[this.id]},t.prototype._toggleAtWidth=function(e){return null==e&&(e=!1),this.maxwidth&&(this.node.offsetWidth>=this.maxwidth?(this.collapsed&&this.expand(e),this.activator&&this.activator.hide()):this.activator&&this.activator.show()),this},t.prototype._trackWidthResize=function(){if(this.maxwidth)return window.addEventListener("resize",_.debounce(function(e){return function(){return requestAnimationFrame(function(){return e._toggleAtWidth()})}}(this),50))},t}(),i=function(){function i(i,n){var a,o;this.node=i,this.collapsible=n,this._clickToToggle=h(this._clickToToggle,this),this.node,this.collapsible,this.target=this.collapsible.node,this.collapsed="false"===this.node.getAttribute(e.BTN.EXPANDED),this.ready=!0,o=this.node.getElementsByClassName(t.BTN.TEXT)[0],this.text={node:o,expanded:o?o.getAttribute(e.BTN.TEXT.EXPANDED):void 0,collapsed:o?o.getAttribute(e.BTN.TEXT.COLLAPSED):void 0},a=this.node.getElementsByClassName(t.BTN.ICON)[0],this.icon={node:a,symbol:a?a.getElementsByTagName("use")[0]:void 0,expanded:a?a.getAttribute(e.BTN.ICON.EXPANDED):void 0,collapsed:a?a.getAttribute(e.BTN.ICON.COLLAPSED):void 0},this.node.addEventListener("click",this._clickToToggle)}return i._collapsibleRefs=s,i.getCollapsibleRefForNode=l,i._activatorRefs=o,i.getActivatorForNode=r,i.prototype.toggle=function(){return this.collapsed?this.expand():this.collapse()},i.prototype.expand=function(){return this.collapsed?(this.ready=!1,this.collapsed=!1,this.node.setAttribute(e.BTN.EXPANDED,"true"),this._toggleText(),this._toggleIcon(),this):this},i.prototype.collapse=function(){return this.collapsed?this:(this.ready=!1,this.collapsed=!0,this.node.setAttribute(e.BTN.EXPANDED,"false"),this._toggleText(),this._toggleIcon(),this)},i.prototype.remove=function(){this.node.removeEventListener("click",this._clickToToggle),o[this.node.getAttribute(e.BTN.TARGET)]=null,this.node.parentNode.removeChild(this.node)},i.prototype.hide=function(){this.node.classList.add("hide")},i.prototype.show=function(){this.node.classList.remove("hide")},i.prototype._toggleText=function(){return this.text.expanded&&this.text.collapsed&&(this.text.node.innerHTML=this.collapsed?this.text.collapsed:this.text.expanded),this},i.prototype._toggleIcon=function(){return this.icon.expanded&&this.icon.collapsed&&(this.collapsed?this.icon.symbol.setAttribute("xlink:href","#"+this.icon.collapsed):this.icon.symbol.setAttribute("xlink:href","#"+this.icon.expanded)),this},i.prototype._clickToToggle=function(e){if(this.ready)return e.preventDefault(),document.body.contains(this.target)?this.collapsible.toggle():void 0},i}(),u=function(){var t,i,n,a,o,r;for(o=document.querySelectorAll("["+e.TYPE+"]"),r=[],n=0,a=o.length;n<a;n++)t=o[n],i=t.id,i?r.push(s[i]=new Shopify.Collapsible(t)):r.push(console.log("This collapsible has been rejected because of missing ID!"));return r},$(document).on("ready page:load",u)}).call(this);e(function(){"use strict";window.Bugsnag&&(window.Bugsnag.metaData.bundles["shopify-home"]=!0)})}("undefined"!=typeof global?global:"undefined"!=typeof window&&window);